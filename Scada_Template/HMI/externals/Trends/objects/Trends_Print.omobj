<type access-modifier="private" name="Trends_Print" display-name="Trends_Print" uuid="9ea85c57-5943-4aa2-a7c6-3e8b12cba954" base-type="Form" base-type-id="ffaf5544-6200-45f4-87ec-9dd24558a9d5" ver="5">
	<designed target="X" value="0" ver="5"/>
	<designed target="Y" value="0" ver="5"/>
	<designed target="Rotation" value="0" ver="5"/>
	<designed target="Scale" value="1" ver="5"/>
	<designed target="Visible" value="true" ver="5"/>
	<designed target="Enabled" value="true" ver="5"/>
	<designed target="Tooltip" value="" ver="5"/>
	<designed target="Width" value="800" ver="5"/>
	<designed target="Height" value="650" ver="5"/>
	<designed target="PenColor" value="4278190080" ver="5"/>
	<designed target="PenStyle" value="0" ver="5"/>
	<designed target="PenWidth" value="1" ver="5"/>
	<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
	<designed target="BrushStyle" value="1" ver="5"/>
	<designed target="WindowX" value="0" ver="5"/>
	<designed target="WindowY" value="0" ver="5"/>
	<designed target="WindowWidth" value="800" ver="5"/>
	<designed target="WindowHeight" value="650" ver="5"/>
	<designed target="WindowCaption" value="Печать" ver="5"/>
	<designed target="ShowWindowCaption" value="true" ver="5"/>
	<designed target="ShowWindowMinimize" value="true" ver="5"/>
	<designed target="ShowWindowMaximize" value="true" ver="5"/>
	<designed target="ShowWindowClose" value="true" ver="5"/>
	<designed target="AlwaysOnTop" value="false" ver="5"/>
	<designed target="WindowSizeMode" value="0" ver="5"/>
	<designed target="WindowBorderStyle" value="1" ver="5"/>
	<designed target="WindowState" value="0" ver="5"/>
	<designed target="WindowScalingMode" value="0" ver="5"/>
	<designed target="MonitorNumber" value="0" ver="5"/>
	<designed target="WindowPosition" value="2" ver="5"/>
	<designed target="WindowCloseMode" value="0" ver="5"/>
	<object access-modifier="private" name="pLegend" display-name="pLegend" uuid="48343e5d-ec13-46d6-a893-4faaeb89c72f" base-type="Trends_Legend" base-type-id="12a9628e-5f57-42ef-afe7-6a7cf5b34b8d" base-const="true" base-ref="true" ver="5"/>
	<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="AboutToOpen">
		<body kind="om">
			<![CDATA[Page.Center.Main.Chart.private.Initializer();
Page.Center.Main.Legend.Init();

// подготавливаем папку для данных
dataFolder: string = Files.CombinePath(unit.ProductInfo.GetUserDataFolder(), "PrintData");			
if (Files.Exists(dataFolder))
	Files.RemoveRecursive(dataFolder);

// сохраняем данные графиков, загрузка будет выполнена после окончания сохранения
//Debug.Log("Сохранение данных для печати в " + dataFolder);
private.DataFolder = dataFolder;
pChart.Lines.Save(dataFolder);
Toolbar.cbShowDataPoints.State	= pChart.ShowDataPoints;
Toolbar.cbShowTimeline.State		= pChart.ShowMiniTrends;
Toolbar.cbShowTitle.State 			= pChart.EnableTitlePrint;
Toolbar.edtTitle.Text 					= pChart.TitlePrint;

Page.Center.Main.Chart.ShowMilliseconds 	= pChart.ShowMilliseconds;
Page.Center.Main.Chart.YAxisPrecision 		= pChart.YAxisPrecision;
Page.Center.Main.Chart.ShowEU 				= pChart.ShowEU;
Page.Center.Main.Chart.DeltaLineWidth 		= 0; // без утолщения выделенного графика
Page.Center.Main.Chart.SynchroColorMarker = pChart.SynchroColorMarker;
Page.Center.Main.Chart.SynchronizeColor	= pChart.SynchronizeColor;
Page.Center.Main.Chart.SelectedItem 			= pChart.SelectedItem;
Page.Center.Main.Chart.TicksCountAxisX		= pChart.TicksCountAxisX;
Page.Center.Main.Chart.TicksCountAxisY		= pChart.TicksCountAxisY;
Page.Center.Main.Chart.ShowRedLine 		= pChart.ShowRedLine;
Page.Center.Main.Chart.ZoomOff();

Page.SetOrientation(1);	// Используем горизонтальную ориентацию страницы]]>
		</body>
	</do-on>
	<do-on access-modifier="private" name="Handler_6" display-name="Handler_6" ver="5" event="WindowActivationChanged">
		<body kind="om">
			<![CDATA[if (active)
	here.Focus = true;]]>
		</body>
	</do-on>
	<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="KeyPress">
		<body kind="om">
			<![CDATA[if (event.KeyCode==75) Close();]]>
		</body>
	</do-on>
	<designed target="ZValue" value="0" ver="5"/>
	<designed target="Opacity" value="1" ver="5"/>
	<object access-modifier="private" name="Toolbar" display-name="Toolbar" uuid="37a77a36-7d8b-4118-b45e-af8c744a8033" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5">
		<designed target="X" value="0" ver="5"/>
		<designed target="Y" value="0" ver="5"/>
		<designed target="ZValue" value="0" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Scale" value="1" ver="5"/>
		<designed target="Visible" value="true" ver="5"/>
		<designed target="Opacity" value="1" ver="5"/>
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="Tooltip" value="" ver="5"/>
		<designed target="Width" value="800" ver="5"/>
		<designed target="Height" value="60" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="4278190080" ver="5"/>
		<designed target="PenStyle" value="0" ver="5"/>
		<designed target="PenWidth" value="1" ver="5"/>
		<designed target="BrushColor" value="4278190080" ver="5"/>
		<designed target="BrushStyle" value="0" ver="5"/>
		<object access-modifier="private" name="btnPrint" display-name="btnPrint" uuid="f888103b-c429-4264-a292-f05cfcae9f10" base-type="Button" base-type-id="61e46e4a-827f-4dd2-ac8a-b68bcaddf442" ver="5">
			<designed target="X" value="10" ver="5"/>
			<designed target="Y" value="10" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="Печать" ver="5"/>
			<designed target="Width" value="40" ver="5"/>
			<designed target="Height" value="40" ver="5"/>
			<designed target="Checkable" value="false" ver="5"/>
			<designed target="Text" value="" ver="5"/>
			<designed target="TextAlignment" value="132" ver="5"/>
			<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
			<designed target="FontColor" value="4278190080" ver="5"/>
			<designed target="OnClickFontColor" value="4278190080" ver="5"/>
			<designed target="OnHoverFontColor" value="4278190080" ver="5"/>
			<designed target="BrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="BrushStyle" value="1" ver="5"/>
			<designed target="OnClickBrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="OnClickBrushStyle" value="1" ver="5"/>
			<designed target="OnHoverBrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="OnHoverBrushStyle" value="1" ver="5"/>
			<designed target="PenColor" value="0xff808080" ver="5"/>
			<designed target="PenStyle" value="1" ver="5"/>
			<designed target="PenWidth" value="1" ver="5"/>
			<designed target="OnClickPenColor" value="0xff000000" ver="5"/>
			<designed target="OnClickPenStyle" value="1" ver="5"/>
			<designed target="OnClickPenWidth" value="1" ver="5"/>
			<designed target="OnHoverPenColor" value="0xff00aaff" ver="5"/>
			<designed target="OnHoverPenStyle" value="1" ver="5"/>
			<designed target="OnHoverPenWidth" value="1" ver="5"/>
			<designed target="DisabledFontColor" value="4278190080" ver="5"/>
			<designed target="DisabledBrushColor" value="4288716960" ver="5"/>
			<designed target="DisabledBrushStyle" value="1" ver="5"/>
			<designed target="DisabledPenColor" value="4288716960" ver="5"/>
			<designed target="DisabledPenStyle" value="1" ver="5"/>
			<designed target="DisabledPenWidth" value="1" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Checked" value="false" ver="5"/>
			<object access-modifier="private" name="Icon" display-name="Icon" uuid="a34b5098-6115-4cdf-857f-fbb4b9cc6120" base-type="Image" base-type-id="5a6b2782-c728-4a42-8c02-1a83ef97e138" ver="5" description="" cardinal="1">
				<designed target="X" value="4" ver="5"/>
				<designed target="Y" value="4" ver="5"/>
				<designed target="ZValue" value="0" ver="5"/>
				<designed target="Rotation" value="0" ver="5"/>
				<designed target="Scale" value="1" ver="5"/>
				<designed target="Visible" value="true" ver="5"/>
				<designed target="Opacity" value="1" ver="5"/>
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="Tooltip" value="" ver="5"/>
				<designed target="Width" value="32" ver="5"/>
				<designed target="Height" value="32" ver="5"/>
				<designed target="PenColor" value="4278190080" ver="5"/>
				<designed target="PenStyle" value="0" ver="5"/>
				<designed target="PenWidth" value="1" ver="5"/>
				<designed target="ImageFile" value="Trends_Icons/Printer.png" ver="5"/>
				<designed target="Active" value="true" ver="5"/>
				<designed target="CurrentFrameNumber" value="0" ver="5"/>
				<designed target="Speed" value="1" ver="5"/>
				<designed target="Flip" value="0" ver="5"/>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ButtonPressed">
				<body kind="om">
					<![CDATA[Page.Center.Main.Print_1.Print();
pOnPrint.Invoke();
Close();]]>
				</body>
			</do-on>
			<designed target="Flip" value="0" ver="5"/>
		</object>
		<object access-modifier="private" name="btnPrintDlg" display-name="btnPrintDlg" uuid="550d516b-c780-4ef1-a44a-08f4c058ea45" base-type="Button" base-type-id="61e46e4a-827f-4dd2-ac8a-b68bcaddf442" ver="5">
			<designed target="X" value="65" ver="5"/>
			<designed target="Y" value="15" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="135" ver="5"/>
			<designed target="Height" value="25" ver="5"/>
			<designed target="Checkable" value="false" ver="5"/>
			<designed target="Text" value="Предпросмотр печати" ver="5"/>
			<designed target="TextAlignment" value="132" ver="5"/>
			<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
			<designed target="FontColor" value="4278190080" ver="5"/>
			<designed target="OnClickFontColor" value="4278190080" ver="5"/>
			<designed target="OnHoverFontColor" value="4278190080" ver="5"/>
			<designed target="BrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="BrushStyle" value="1" ver="5"/>
			<designed target="OnClickBrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="OnClickBrushStyle" value="1" ver="5"/>
			<designed target="OnHoverBrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="OnHoverBrushStyle" value="1" ver="5"/>
			<designed target="PenColor" value="0xff808080" ver="5"/>
			<designed target="PenStyle" value="1" ver="5"/>
			<designed target="PenWidth" value="1" ver="5"/>
			<designed target="OnClickPenColor" value="0xff000000" ver="5"/>
			<designed target="OnClickPenStyle" value="1" ver="5"/>
			<designed target="OnClickPenWidth" value="1" ver="5"/>
			<designed target="OnHoverPenColor" value="0xff00aaff" ver="5"/>
			<designed target="OnHoverPenStyle" value="1" ver="5"/>
			<designed target="OnHoverPenWidth" value="1" ver="5"/>
			<designed target="DisabledFontColor" value="4278190080" ver="5"/>
			<designed target="DisabledBrushColor" value="4288716960" ver="5"/>
			<designed target="DisabledBrushStyle" value="1" ver="5"/>
			<designed target="DisabledPenColor" value="4288716960" ver="5"/>
			<designed target="DisabledPenStyle" value="1" ver="5"/>
			<designed target="DisabledPenWidth" value="1" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Checked" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ButtonPressed">
				<body kind="om">
					<![CDATA[pOnPrintPreview.Invoke();
Page.Center.Main.Print_1.PrintPreviewDialog();]]>
				</body>
			</do-on>
			<designed target="Flip" value="0" ver="5"/>
			<init target="Visible" ver="5" ref="AllowSelectPrinter"/>
		</object>
		<object access-modifier="private" name="cbShowDataPoints" display-name="cbShowDataPoints" uuid="0238747f-725f-45a0-b6dd-13c1111368e3" base-type="Checkbox" base-type-id="ba26cad1-a080-4c5d-8847-ce576488cf3f" ver="5">
			<designed target="X" value="220" ver="5"/>
			<designed target="Y" value="30" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="120" ver="5"/>
			<designed target="Height" value="25" ver="5"/>
			<designed target="Text" value="Маркеры точек" ver="5"/>
			<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0" ver="5"/>
			<designed target="FontColor" value="4278190080" ver="5"/>
			<designed target="State" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="StateChanged">
				<body kind="om">
					<![CDATA[Page.Center.Main.Chart.ShowDataPoints = State;]]>
				</body>
			</do-on>
			<designed target="Flip" value="0" ver="5"/>
			<do-trace access-modifier="private" target="FontColor" ver="5">
				<body>
					<![CDATA[private.pTheme.ForegroundColor]]>
				</body>
			</do-trace>
		</object>
		<object access-modifier="private" name="cbShowTimeline" display-name="cbShowTimeline" uuid="b898dd9a-017f-429c-b68b-9bab81b741ab" base-type="Checkbox" base-type-id="ba26cad1-a080-4c5d-8847-ce576488cf3f" ver="5">
			<designed target="X" value="220" ver="5"/>
			<designed target="Y" value="5" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="120" ver="5"/>
			<designed target="Height" value="25" ver="5"/>
			<designed target="Text" value="Минитренды" ver="5"/>
			<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0" ver="5"/>
			<designed target="FontColor" value="4278190080" ver="5"/>
			<designed target="State" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="StateChanged">
				<body kind="om">
					<![CDATA[Page.Center.Main.Chart.ShowMiniTrends = State ;]]>
				</body>
			</do-on>
			<designed target="Flip" value="0" ver="5"/>
			<do-trace access-modifier="private" target="FontColor" ver="5">
				<body>
					<![CDATA[private.pTheme.ForegroundColor]]>
				</body>
			</do-trace>
		</object>
		<object access-modifier="private" name="cbShowTitle" display-name="cbShowTitle" uuid="14ac1095-480a-4221-8463-6f462954bab1" base-type="Checkbox" base-type-id="ba26cad1-a080-4c5d-8847-ce576488cf3f" ver="5">
			<designed target="X" value="350" ver="5"/>
			<designed target="Y" value="5" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="120" ver="5"/>
			<designed target="Height" value="25" ver="5"/>
			<designed target="Text" value="Название графика" ver="5"/>
			<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0" ver="5"/>
			<designed target="FontColor" value="4278190080" ver="5"/>
			<designed target="State" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="StateChanged">
				<body kind="om">
					<![CDATA[Page.Center.Main.recTitle.Visible = State;
Page.Center.UpdateLayout();]]>
				</body>
			</do-on>
			<designed target="Flip" value="0" ver="5"/>
			<do-trace access-modifier="private" target="FontColor" ver="5">
				<body>
					<![CDATA[private.pTheme.ForegroundColor]]>
				</body>
			</do-trace>
		</object>
		<object access-modifier="private" name="edtTitle" display-name="edtTitle" uuid="3dba6faa-45ba-4612-bee9-801b55a1947a" base-type="LineEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="5" description="" cardinal="1">
			<designed target="X" value="350" ver="5"/>
			<designed target="Y" value="30" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="350" ver="5"/>
			<designed target="Height" value="20" ver="5"/>
			<designed target="Text" value="" ver="5"/>
			<designed target="Font" value="MS Shell Dlg 2,8.25,-1,5,50,0,0,0,0,0" ver="5"/>
			<designed target="FontColor" value="4278190080" ver="5"/>
			<designed target="TextAlignment" value="129" ver="5"/>
			<designed target="HideInput" value="false" ver="5"/>
			<designed target="PlaceholderText" value="" ver="5"/>
			<designed target="ReadOnly" value="false" ver="5"/>
			<designed target="Flip" value="0" ver="5"/>
		</object>
		<designed target="Flip" value="0" ver="5"/>
	</object>
	<object access-modifier="private" name="private" display-name="private" uuid="7ae5985b-1a3e-4a06-801f-3b070d725af5" base-type="" base-type-id="00000000-0000-0000-0000-000000000000" ver="5">
		<object access-modifier="private" name="pTheme" display-name="pTheme" uuid="39f3789f-31e8-438b-b808-3ddaa223249c" base-type="Trends_Theme" base-type-id="3fbfa4c2-c742-4bec-94dc-d1bcb7ef25b6" base-const="true" base-ref="true" ver="5" description=""/>
		<init target="pTheme" ver="5" ref="init_Theme"/>
		<object access-modifier="private" name="pScreenKeyboard" display-name="pScreenKeyboard" uuid="b3ad8019-d5eb-4ff0-9b73-8e98d36c8605" base-type="ScreenKeyboardOptions" base-type-id="0589bc8e-fbb2-4f0e-b5d2-f0d825538ef1" base-const="true" base-ref="true" ver="5" description=""/>
		<object access-modifier="private" name="DataFolder" display-name="DataFolder" uuid="62218228-d524-402c-a829-2203576da802" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5" description="" cardinal="1"/>
		<object access-modifier="private" name="SaveFilesMask" display-name="SaveFilesMask" uuid="fe891993-e518-407c-b747-ecf6089bdb87" base-type="notifying_uint4" base-type-id="2606f4f1-fd02-40e5-b3c8-9c59e02296fb" ver="5">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (oldValue != value)
{
	oldValue = value;

	if (DataFolder != "" && value == 0)
	{
		//Debug.Log("Загрузка данных для печати графиков из папки " + DataFolder);
		if (!Page.Center.Main.Chart.LoadFromFolder(DataFolder))
			Debug.Log("Ошибка загрузки данных для печати графиков из папки " + DataFolder);		
		DataFolder = "";
	}
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="oldValue" display-name="oldValue" uuid="d6d5a778-318c-4a01-a1fd-7f241164b3c5" base-type="uint4" base-type-id="a42274b8-724b-4f03-bcf9-dd8498c29f8e" ver="5" description="" cardinal="1"/>
		</object>
		<init target="SaveFilesMask" ver="5" value="0"/>
		<do-trace access-modifier="private" target="SaveFilesMask" ver="5">
			<body>
				<![CDATA[pChart.Lines.SaveFilesMask]]>
			</body>
		</do-trace>
		<init target="pScreenKeyboard" ver="5" ref="init_ScreenKeyboard"/>
	</object>
	<object access-modifier="private" name="Debug" display-name="Debug" uuid="ee8fe844-d48f-4d39-be0a-1ddf6af0f791" base-type="DebugTool" base-type-id="43946044-139a-43f4-a7b8-19a6074ffc56" ver="5"/>
	<object access-modifier="private" name="Files" display-name="Files" uuid="f08d55d8-e3f8-4252-9e34-56eaa69e492e" base-type="FileSystem" base-type-id="34d744f9-7303-4077-a3f7-9c06c0945512" ver="5">
		<designed target="RootPath" value="/" ver="5"/>
	</object>
	<object access-modifier="private" name="Page" display-name="Page" uuid="336e81db-c71d-4e5b-9039-7cd345fbbd43" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5">
		<designed target="X" value="5" ver="5"/>
		<designed target="Y" value="60" ver="5"/>
		<designed target="ZValue" value="0" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Scale" value="1" ver="5"/>
		<designed target="Visible" value="true" ver="5"/>
		<designed target="Opacity" value="1" ver="5"/>
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="Tooltip" value="" ver="5"/>
		<designed target="Width" value="790" ver="5"/>
		<designed target="Height" value="540" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="0xff808080" ver="5"/>
		<designed target="PenStyle" value="1" ver="5"/>
		<designed target="PenWidth" value="1" ver="5"/>
		<designed target="BrushColor" value="0xffffffff" ver="5"/>
		<designed target="BrushStyle" value="1" ver="5"/>
		<do access-modifier="private" name="UpdateLayout" display-name="UpdateLayout" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="om">
				<![CDATA[
Left.Height = Height;
Right.Height = Height;
Center.Height = Height;
Right.X = Width - Right.Width;

Center.Width = Width - Left.Width - Right.Width;
Center.X = Left.Width;
Center.UpdateLayout();
]]>
			</body>
		</do>
		<object access-modifier="private" name="theme" display-name="theme" uuid="05e904a8-cadc-4f1b-8d28-07e6f49af11b" base-type="Trends_Theme" base-type-id="3fbfa4c2-c742-4bec-94dc-d1bcb7ef25b6" ver="5" description="" cardinal="1">
			<do-trace access-modifier="private" target="AxisFormat" ver="5">
				<body>
					<![CDATA[private.pTheme.AxisFormat]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="AxisFont" ver="5">
				<body>
					<![CDATA[private.pTheme.AxisFont]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="Font" ver="5">
				<body>
					<![CDATA[private.pTheme.Font]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="TitleFont" ver="5">
				<body>
					<![CDATA[private.pTheme.TitleFont]]>
				</body>
			</do-trace>
		</object>
		<designed target="Flip" value="0" ver="5"/>
		<object access-modifier="private" name="Left" display-name="Left" uuid="988a3541-293f-420e-8b38-cd1fa0f6ee48" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
			<designed target="X" value="0" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Flip" value="0" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="19" ver="5"/>
			<designed target="Height" value="540" ver="5"/>
			<designed target="RoundingRadius" value="0" ver="5"/>
			<designed target="PenColor" value="4278190080" ver="5"/>
			<designed target="PenStyle" value="0" ver="5"/>
			<designed target="PenWidth" value="1" ver="5"/>
			<designed target="BrushColor" value="4278190080" ver="5"/>
			<designed target="BrushStyle" value="0" ver="5"/>
		</object>
		<object access-modifier="private" name="Center" display-name="Center" uuid="87c3d234-b609-4581-90f5-5780aadccd30" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
			<designed target="X" value="19" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Flip" value="0" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="752" ver="5"/>
			<designed target="Height" value="540" ver="5"/>
			<designed target="RoundingRadius" value="0" ver="5"/>
			<designed target="PenColor" value="4278190080" ver="5"/>
			<designed target="PenStyle" value="0" ver="5"/>
			<designed target="PenWidth" value="1" ver="5"/>
			<designed target="BrushColor" value="4278190080" ver="5"/>
			<designed target="BrushStyle" value="0" ver="5"/>
			<object access-modifier="private" name="Header" display-name="Header" uuid="0335b080-8c78-4962-8490-93fbc64b8d76" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="5" description="" cardinal="1">
				<designed target="X" value="0" ver="5"/>
				<designed target="Y" value="0" ver="5"/>
				<designed target="ZValue" value="0" ver="5"/>
				<designed target="Rotation" value="0" ver="5"/>
				<designed target="Scale" value="1" ver="5"/>
				<designed target="Flip" value="0" ver="5"/>
				<designed target="Visible" value="true" ver="5"/>
				<designed target="Opacity" value="1" ver="5"/>
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="Tooltip" value="" ver="5"/>
				<designed target="Width" value="752" ver="5"/>
				<designed target="Height" value="19" ver="5"/>
				<designed target="Text" value="" ver="5"/>
				<designed target="Font" value="MS Shell Dlg 2,8.25,-1,5,50,0,0,0,0,0" ver="5"/>
				<designed target="FontColor" value="0xff000000" ver="5"/>
				<designed target="TextAlignment" value="129" ver="5"/>
			</object>
			<object access-modifier="private" name="Main" display-name="Main" uuid="38b4ac90-8d4c-4269-8b4b-18add26db7a6" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
				<designed target="X" value="0" ver="5"/>
				<designed target="Y" value="19" ver="5"/>
				<designed target="ZValue" value="0" ver="5"/>
				<designed target="Rotation" value="0" ver="5"/>
				<designed target="Scale" value="1" ver="5"/>
				<designed target="Flip" value="0" ver="5"/>
				<designed target="Visible" value="true" ver="5"/>
				<designed target="Opacity" value="1" ver="5"/>
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="Tooltip" value="" ver="5"/>
				<designed target="Width" value="752" ver="5"/>
				<designed target="Height" value="502" ver="5"/>
				<designed target="RoundingRadius" value="0" ver="5"/>
				<designed target="PenColor" value="4278190080" ver="5"/>
				<designed target="PenStyle" value="0" ver="5"/>
				<designed target="PenWidth" value="1" ver="5"/>
				<designed target="BrushColor" value="4278190080" ver="5"/>
				<designed target="BrushStyle" value="0" ver="5"/>
				<object access-modifier="private" name="recTitle" display-name="recTitle" uuid="ac7e26c1-141c-4b0b-b8b8-856782cd2693" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
					<designed target="X" value="0" ver="5"/>
					<designed target="Y" value="0" ver="5"/>
					<designed target="ZValue" value="0" ver="5"/>
					<designed target="Rotation" value="0" ver="5"/>
					<designed target="Scale" value="1" ver="5"/>
					<designed target="Visible" value="true" ver="5"/>
					<designed target="Opacity" value="1" ver="5"/>
					<designed target="Enabled" value="true" ver="5"/>
					<designed target="Tooltip" value="" ver="5"/>
					<designed target="Width" value="752" ver="5"/>
					<designed target="Height" value="20" ver="5"/>
					<designed target="RoundingRadius" value="0" ver="5"/>
					<designed target="PenColor" value="4278190080" ver="5"/>
					<designed target="PenStyle" value="0" ver="5"/>
					<designed target="PenWidth" value="1" ver="5"/>
					<designed target="BrushColor" value="0xffffffff" ver="5"/>
					<designed target="BrushStyle" value="1" ver="5"/>
					<object access-modifier="private" name="LinearLayout_1" display-name="LinearLayout_1" uuid="cb31b412-000d-4537-9e16-3c9b929aa0f2" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="5" description="" cardinal="1">
						<designed target="Orientation" value="1" ver="5"/>
						<designed target="Gap" value="0" ver="5"/>
					</object>
					<designed target="Flip" value="0" ver="5"/>
					<object access-modifier="private" name="txtTitle" display-name="txtTitle" uuid="261acbc4-1392-4942-90af-dd1e29cbd5b8" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="5" description="" cardinal="1">
						<designed target="X" value="0" ver="5"/>
						<designed target="Y" value="0" ver="5"/>
						<designed target="ZValue" value="0" ver="5"/>
						<designed target="Rotation" value="0" ver="5"/>
						<designed target="Scale" value="1" ver="5"/>
						<designed target="Visible" value="true" ver="5"/>
						<designed target="Opacity" value="1" ver="5"/>
						<designed target="Enabled" value="true" ver="5"/>
						<designed target="Tooltip" value="" ver="5"/>
						<designed target="Width" value="752" ver="5"/>
						<designed target="Height" value="20" ver="5"/>
						<designed target="Text" value="Название графика" ver="5"/>
						<designed target="Font" value="Tahoma,10,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
						<designed target="FontColor" value="0xff000000" ver="5"/>
						<designed target="TextAlignment" value="36" ver="5"/>
						<init target="Text" ver="5" value=""/>
						<do-trace access-modifier="private" target="Text" ver="5">
							<body>
								<![CDATA[Toolbar.edtTitle.Text]]>
							</body>
						</do-trace>
						<designed target="Flip" value="0" ver="5"/>
						<do-trace access-modifier="private" target="Font" ver="5">
							<body>
								<![CDATA[private.pTheme.AxisFont]]>
							</body>
						</do-trace>
					</object>
				</object>
				<object access-modifier="private" name="Chart" display-name="Chart" uuid="0ca575cd-bfed-4326-9c03-2b6703419544" base-type="Trends_Chart" base-type-id="659f73ba-7fa5-4aa4-ac4d-623541275829" ver="5">
					<designed target="X" value="0" ver="5"/>
					<designed target="Y" value="20" ver="5"/>
					<designed target="Rotation" value="0" ver="5"/>
					<designed target="Width" value="752" ver="5"/>
					<designed target="Height" value="314" ver="5"/>
					<init target="ActiveMode" ver="5" value="1"/>
					<init target="pOnDataLoad" ver="5" ref="DoOnLoadData"/>
					<init target="initApSource" ver="5" ref="ApSource_0"/>
					<designed target="PenStyle" value="0" ver="5"/>
					<init target="init_Theme" ver="5" ref="Page.theme"/>
					<init target="init_ScreenKeyboard" ver="5">
						<object access-modifier="private" uuid="e990a9f0-356a-4a50-a90c-a98ed740a88d" base-type="ScreenKeyboardOptions" base-type-id="0589bc8e-fbb2-4f0e-b5d2-f0d825538ef1" ver="5">
							<init target="Enabled" ver="5" value="false"/>
						</object>
					</init>
				</object>
				<object access-modifier="private" name="Legend" display-name="Legend" uuid="ae6cc87f-2fa3-4c47-bea1-88004924ac38" base-type="Table" base-type-id="c65ff4dc-f22b-47d3-9333-72c4e4e5f662" ver="5">
					<designed target="X" value="0" ver="5"/>
					<designed target="Y" value="400" ver="5"/>
					<designed target="Rotation" value="0" ver="5"/>
					<designed target="Scale" value="1" ver="5"/>
					<designed target="Visible" value="true" ver="5"/>
					<designed target="Enabled" value="true" ver="5"/>
					<designed target="Width" value="752" ver="5"/>
					<designed target="Height" value="90" ver="5"/>
					<designed target="SelectionBehavior" value="1" ver="5"/>
					<designed target="SelectionMode" value="3" ver="5"/>
					<object access-modifier="private" name="Columns" display-name="Columns" uuid="c02b3c17-5eea-49da-a262-ec4bc6a4198c" base-type="TableColumn" base-type-id="109c05c5-8dcf-4a8f-aedd-5bb547cca2d4" ver="5" cardinal="15">
						<designed target="Title" value="" ver="5"/>
						<designed target="Description" value="" ver="5"/>
						<designed target="Id" value="" ver="5"/>
						<designed target="BackgroundColor" value="0xffffffff" ver="5"/>
						<designed target="ForegroundColor" value="0xff000000" ver="5"/>
						<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
						<designed target="TitleBackgroundColor" value="0xfff0f0f0" ver="5"/>
						<designed target="TitleForegroundColor" value="0xff000000" ver="5"/>
						<designed target="TitleFont" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
						<designed target="Width" value="20" ver="5"/>
						<designed target="WidthResizeMode" value="0" ver="5"/>
						<designed target="Hidden" value="true" ver="5"/>
						<designed target="NumberFormat" value="%d" ver="5"/>
						<designed target="TimeFormat" value="dd.MM.yyyy hh:mm:ss.zzz" ver="5"/>
						<designed target="Emptiable" value="true" ver="5"/>
						<designed target="TextAlignment" value="132" ver="5"/>
						<designed target="JsonFilter" value="" ver="5"/>
						<designed target="SortingEnabled" value="false" ver="5"/>
						<designed target="SortOrder" value="0" ver="5"/>
						<designed target="SortPriority" value="0" ver="5"/>
						<designed target="WordWrap" value="false" ver="5"/>
						<designed target="TitleTextAlignment" value="132" ver="5"/>
						<designed target="ColumnOwnId" value="" ver="5"/>
						<designed target="SortMode" value="0" ver="5"/>
						<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="5" event="MouseRightTitleClick">
							<body kind="om">
								<![CDATA[ContextMenu.OpenColumnsMenu(ScreenX(MouseX, MouseY), ScreenY(MouseX, MouseY));]]>
							</body>
						</do-on>
						<do-trace access-modifier="private" target="TitleFont" ver="5">
							<body>
								<![CDATA[private.pTheme.TitleFont]]>
							</body>
						</do-trace>
						<do-trace access-modifier="private" target="Font" ver="5">
							<body>
								<![CDATA[private.pTheme.Font]]>
							</body>
						</do-trace>
						<do-on access-modifier="private" name="Handler_5" display-name="Handler_5" ver="5" event="WidthChanged">
							<body kind="om">
								<![CDATA[if (!Hidden)
{
	OriginalWidth = Width / WidthScale;
	Center.UpdateLayout();
}]]>
							</body>
						</do-on>
						<object access-modifier="private" name="OriginalWidth" display-name="OriginalWidth" uuid="561049dc-5116-4c1d-abe8-961a8c8a062a" base-type="double" base-type-id="7ad62ecf-96dd-4751-9b96-e77954b44409" ver="5" description="" cardinal="1"/>
					</object>
					<designed target="LatestRowTracking" value="false" ver="5"/>
					<designed target="HeaderHeight" value="22" ver="5"/>
					<designed target="HeaderVisible" value="true" ver="5"/>
					<designed target="RowHeight" value="22" ver="5"/>
					<designed target="RowOrder" value="0" ver="5"/>
					<object access-modifier="private" name="TableModel_1" display-name="TableModel_1" uuid="e452b0f6-f7b2-4bb4-9f14-b26e88cf2f1c" base-type="TableModel" base-type-id="32b2875b-ee3e-454d-bcbb-40806a49273c" ver="5">
						<designed target="Frozen" value="false" ver="5"/>
						<designed target="MaxRowCount" value="10000" ver="5"/>
					</object>
					<init target="TableModel" ver="5" ref="TableModel_1"/>
					<object access-modifier="private" name="TableDecorator" display-name="TableDecorator" uuid="ef809072-25b3-45ef-ab94-679558beaf02" base-type="TableDecorator" base-type-id="2ff6a2d7-9573-4060-bfea-29c63d61b079" ver="5" cardinal="1">
						<designed target="JsonDecorator" value="" ver="5"/>
					</object>
					<designed target="SelectionOverlayEnabled" value="false" ver="5"/>
					<do access-modifier="private" name="Init" display-name="Init" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
						<body kind="om">
							<![CDATA[TableModel_1.AddColumn("Advise",     "","","","string",false,true);
TableModel_1.AddColumn("AxisColor",  "","","","uint4",false,true);
TableModel_1.AddColumn("LineColor",  "","","","uint4",false,true);
TableModel_1.AddColumn("LineStyle",  "","","","variant",false,true);
TableModel_1.AddColumn("Marker",     "","","","variant",false,true);
TableModel_1.AddColumn("Description","","","","string",false,true);
TableModel_1.AddColumn("Tag",        "","","","string",false,true);
TableModel_1.AddColumn("Value",      "","","","variant",false,true);
TableModel_1.AddColumn("EU",         "","","","string",false,true);
TableModel_1.AddColumn("Time",       "","","","variant",false,true);
TableModel_1.AddColumn("Quality",    "","","","variant",false,true);
TableModel_1.AddColumn("Minimum",    "","","","variant",false,true);
TableModel_1.AddColumn("Maximum",    "","","","variant",false,true);
TableModel_1.AddColumn("Quantity",   "","","","variant",false,true);
TableModel_1.AddColumn("Interpolation", "","","","string",false,true);


i: int4 = 0;
while (i < Columns.Length)
{
	Columns[i].Id = pLegend.View.Columns[i].Id;
	Columns[i].Title = pLegend.View.Columns[i].Title;
	Columns[i].Description = pLegend.View.Columns[i].Description;	
	Columns[i].Hidden = pLegend.View.Columns[i].Hidden;
	Columns[i].OriginalWidth = pLegend.View.Columns[i].Width;
	i += 1;
}

i = 0;
while (i < pLegend.View.GetRowCount())
{
	rowContent:string = pLegend.View.TableModel.GetRowDataAsJson(i);
	if (TableModel_1.GetRowCount() < (i+1))
		TableModel_1.AddRow();
	TableModel_1.SetRowDataAsJson(i, rowContent);
	i += 1;
}
HeaderHeight = pLegend.View.HeaderHeight;
RowHeight = pLegend.View.RowHeight;
TableDecorator.JsonDecorator = pLegend.View.GetJsonDecorator(theme.SelectionColor);]]>
						</body>
					</do>
					<designed target="DelayedSortingEnabled" value="false" ver="5"/>
					<designed target="HorizontalScrollMode" value="0" ver="5"/>
					<designed target="VerticalScrollMode" value="0" ver="5"/>
					<designed target="HorizontalScrollBarPolicy" value="1" ver="5"/>
					<designed target="VerticalScrollBarPolicy" value="1" ver="5"/>
					<designed target="BackgroundColor" value="0xffffffff" ver="5"/>
					<designed target="FrameColor" value="0xff000000" ver="5"/>
					<designed target="GridColor" value="0xff5f5f5f" ver="5"/>
					<do access-modifier="private" name="FitToWidth" display-name="FitToWidth" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
						<body kind="javascript">
							<![CDATA[var originalWidth = 0.0;

var i = 0;
while (i < pLegend.View.Columns.Length)
{
	if (!Columns[i].Hidden)
		originalWidth += Columns[i].OriginalWidth;
	i += 1;
}

WidthScale = Math.min(1, Width / originalWidth);

//log("Fit to " + Width + " with scale " + WidthScale);

RowHeight = pLegend.View.RowHeight * WidthScale;
HeaderHeight = pLegend.View.HeaderHeight * WidthScale;

var columnsFont = ScaleFontSize(pLegend.View.Columns.Font, WidthScale);
var columnsTitleFont = ScaleFontSize(pLegend.View.Columns.TitleFont, WidthScale);

i = 0;
while (i < Columns.Length)
{
	if (!Columns[i].Hidden)
	{
		Columns[i].Width = Columns[i].OriginalWidth * WidthScale;
		Columns[i].TitleFont = columnsTitleFont;
		Columns[i].Font = columnsFont;		
	}
	i += 1;
}

function ScaleFontSize(font, scale)
{
	var fontItems = font.split(',');
	fontItems[1] = fontItems[1] * scale;
	return fontItems.join(',');
}]]>
						</body>
					</do>
					<object access-modifier="private" name="WidthScale" display-name="WidthScale" uuid="afd8125c-41fe-40b0-8f9d-70a305d1337a" base-type="double" base-type-id="7ad62ecf-96dd-4751-9b96-e77954b44409" ver="5" description="" cardinal="1"/>
				</object>
				<object access-modifier="private" name="ContextMenu" display-name="ContextMenu" uuid="8f08b7ca-5934-4dc5-b5e1-50a8e5e33f21" base-type="Dummy" base-type-id="e4b644cf-f3a8-4d11-82a0-6acc23748e14" ver="5">
					<designed target="X" value="0" ver="5"/>
					<designed target="Y" value="0" ver="5"/>
					<designed target="ZValue" value="0" ver="5"/>
					<designed target="Rotation" value="0" ver="5"/>
					<designed target="Scale" value="1" ver="5"/>
					<designed target="Visible" value="false" ver="5"/>
					<designed target="Opacity" value="1" ver="5"/>
					<designed target="Enabled" value="true" ver="5"/>
					<designed target="Tooltip" value="" ver="5"/>
					<object access-modifier="private" name="MenuResult" display-name="MenuResult" uuid="ab481fa2-db15-4ab4-af22-4d7db3ffb9b6" base-type="MenuResult" base-type-id="0fe7658c-92f4-4af7-b038-3594414ac651" ver="5"/>
					<object access-modifier="private" name="mX" display-name="mX" uuid="0eaae2ed-2f43-4e5a-ad9d-1868d5097cda" base-type="int4" base-type-id="74222947-f188-4195-8e0e-e33bd9827255" ver="5"/>
					<object access-modifier="private" name="mY" display-name="mY" uuid="526c1919-f29b-4285-9791-79b55520bdc7" base-type="int4" base-type-id="74222947-f188-4195-8e0e-e33bd9827255" ver="5"/>
					<do access-modifier="private" name="OpenColumnsMenu" display-name="OpenColumnsMenu" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
						<body kind="om">
							<![CDATA[mX = x;
mY = y;
ShowColumnsMenu.Invoke();]]>
						</body>
						<param access-modifier="private" name="x" display-name="" uuid="51b19d1d-968b-4f2f-b0f6-2e0f2f080812" base-type="int4" base-type-id="74222947-f188-4195-8e0e-e33bd9827255" ver="5"/>
						<param access-modifier="private" name="y" display-name="" uuid="c1af061c-a6c1-4359-8a6b-ffbe97820f87" base-type="int4" base-type-id="74222947-f188-4195-8e0e-e33bd9827255" ver="5"/>
					</do>
					<object access-modifier="private" name="ShowColumnsMenu" display-name="ShowColumnsMenu" uuid="f70dd4a7-9771-4a26-800d-520e2cdfa131" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
						<designed target="Enabled" value="true" ver="5"/>
						<designed target="InvokeTrigger" value="false" ver="5"/>
						<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-new" form-by-id="false">
							<object access-modifier="private" uuid="f16a03fa-b1f9-4e52-a111-349c8784d743" base-type="Menu" base-type-id="07bb4545-980a-4140-bbaa-4d1397447864" ver="5">
								<init target="pResult" ver="5" ref="MenuResult"/>
								<init target="WindowX" ver="5">
									<expr>
										<![CDATA[mX]]>
									</expr>
								</init>
								<init target="WindowY" ver="5">
									<expr>
										<![CDATA[mY]]>
									</expr>
								</init>
								<init target="pAction" ver="5" ref="OnColumnsMenuClick"/>
								<init target="Items" ver="5">
									<expr>
										<![CDATA[GetColumnsMenuItems()]]>
									</expr>
								</init>
								<init target="pTheme" ver="5" ref="Page.theme"/>
							</object>
						</do-on>
					</object>
					<object access-modifier="private" name="OnColumnsMenuClick" display-name="OnColumnsMenuClick" uuid="8a1f217a-79cf-4089-9230-b0de4d86ff54" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
						<designed target="Enabled" value="true" ver="5"/>
						<designed target="InvokeTrigger" value="false" ver="5"/>
						<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
							<body kind="om">
								<![CDATA[i: int4 = String.ToInt4(MenuResult.Id, -1);
if (i> -1)
	Legend.Columns[i].Hidden = !Legend.Columns[i].Hidden;
Center.UpdateLayout();]]>
							</body>
						</do-on>
					</object>
					<do access-modifier="private" name="GetColumnsMenuItems" display-name="GetColumnsMenuItems" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
						<body kind="javascript">
							<![CDATA[var items = [];

var i = 0;
while (i < Legend.Columns.Length)
{
	if (!Chart.SynchronizeColor.Value || i != unit.Const.cn.CL_AXIS)
	{
		var column = Legend.Columns[i];
		items.push({
			 'id': i,
			 'title': column.Title == "" ? column.Description : column.Title,
			 'checked': !column.Hidden,
			 'staysOpen': true
			});
	}
	i += 1;
}

return JSON.stringify(items);]]>
						</body>
					</do>
					<designed target="Flip" value="0" ver="5"/>
				</object>
				<object access-modifier="private" name="DoOnLoadData" display-name="DoOnLoadData" uuid="8a77aa94-83b9-4867-8a6d-7fc2975189b0" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
					<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="Invoked">
						<body kind="om">
							<![CDATA[//Debug.Log("Print.DoOnLoadData");

Chart.MiniTrend.LinkToChart(pChart.MiniTrend.nChart);
if (Chart.ShowRedLine)
	Chart.SetRedLine(Chart.Params.pExParams.tRedLine);

// Сопоставляем индексы осей для чарта печати и исходного чарта
isrc:int4 = 1;	// индекс линии в исходном чарте
idst:int4 = 1;	// индекс линии в чарте печати
while (idst <= Chart.Params.LinesCount)
{
	while (!pChart.Params.Lines[isrc].Used && isrc<Chart.Line.Length)
		isrc += 1;
	Chart.Params.nItem[idst] = isrc;
	isrc += 1;
	idst += 1;
}
//Восстанавливаем позицию выравнивания оси как в исходном чарте
idst = 1;	
while (idst <= Chart.Params.LinesCount)
{
	isrc = Chart.Params.nItem[idst];
 	Chart.Chart.Axis_Y[idst].Align = pChart.Chart.Axis_Y[isrc].Align;
	idst += 1;
}

// Добавление реперов
n:int4 = 0;
while (n < Chart.Chart.Length)
{
	Chart.Chart[n].SetVisible(Chart.Params.ExParams.Charts[n].bVisible);
	i:int4 = 0;
	while (i < Chart.Chart.ControlLine.Length)
	{
		Chart.Chart[n].ControlLine[i].LineWidth = pChart.Chart.ControlLine[i].LineWidth;
		Chart.Chart[n].ControlLine[i].Visible = pChart.Chart.ControlLine[i].Visible;
		Chart.Chart[n].ControlLine[i].Value = pChart.Chart.ControlLine[i].Value;
		if (pChart.Chart.ControlLine[i].getActive())
				Chart.Chart[n].ControlLine[i].setActive(true);
		i += 1;
	}
	n += 1;
}

Chart.ControlLineWidth = pChart.ControlLineWidth;
Chart.ControlLineColor = pChart.ControlLineColor;
Chart.ControlLineSelectWidth = pChart.ControlLineSelectWidth;
Chart.ControlLineSelectColor = pChart.ControlLineSelectColor;]]>
						</body>
					</do-on>
					<designed target="Enabled" value="true" ver="5"/>
					<designed target="InvokeTrigger" value="false" ver="5"/>
				</object>
				<object access-modifier="private" name="Print_1" display-name="Print_1" uuid="ff3e4bce-30ee-4dd6-b0dc-9062ab71f59e" base-type="Print" base-type-id="da4ac71d-92b8-427c-9ef0-5c6cb681ae96" ver="5" description="" cardinal="1">
					<designed target="Area" value="0" ver="5"/>
				</object>
			</object>
			<object access-modifier="private" name="Footer" display-name="Footer" uuid="8e560470-4e88-4685-82d4-f1edf4549692" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="5" description="" cardinal="1">
				<designed target="X" value="0" ver="5"/>
				<designed target="Y" value="521" ver="5"/>
				<designed target="ZValue" value="0" ver="5"/>
				<designed target="Rotation" value="0" ver="5"/>
				<designed target="Scale" value="1" ver="5"/>
				<designed target="Flip" value="0" ver="5"/>
				<designed target="Visible" value="true" ver="5"/>
				<designed target="Opacity" value="1" ver="5"/>
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="Tooltip" value="" ver="5"/>
				<designed target="Width" value="752" ver="5"/>
				<designed target="Height" value="19" ver="5"/>
				<designed target="Text" value="" ver="5"/>
				<designed target="Font" value="MS Shell Dlg 2,8.25,-1,5,50,0,0,0,0,0" ver="5"/>
				<designed target="FontColor" value="4278190080" ver="5"/>
				<designed target="TextAlignment" value="129" ver="5"/>
			</object>
			<do access-modifier="private" name="UpdateLayout" display-name="UpdateLayout" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
				<body kind="om">
					<![CDATA[Header.Width = Width;
Main.Width = Width;
Main.Y = Header.Height;
Main.Height = Height - Header.Height - Footer.Height;
Footer.Width = Width;
Footer.Y = Height - Footer.Height;

// Определяем необходимую высоту таблицы
rowCount:int4 = Main.Legend.GetRowCount();
if (rowCount < 1) rowCount = 1;
legendHeight: int4 = (Main.Legend.HeaderHeight + 2) + rowCount * (Main.Legend.RowHeight + 2) + 18;

//	Определяем нужен или не нужен заголовок
Main.recTitle.Width = Width;
titleHeight: double = Toolbar.cbShowTitle.State ? Main.recTitle.Height : 0;

//  Оставшееся пространство занимает чарт
Main.Chart.Width = Width;
Main.Chart.Height = Center.Height - legendHeight - titleHeight - Header.Height - Footer.Height;
Main.Chart.Y = Main.recTitle.Y + titleHeight;

Main.Legend.Y = Main.Chart.Y + Main.Chart.Height;
Main.Legend.Width = Width;
Main.Legend.Height = legendHeight;
Main.Legend.FitToWidth();

]]>
				</body>
			</do>
		</object>
		<object access-modifier="private" name="Right" display-name="Right" uuid="8bf5899e-ccd7-4d00-afc0-6ce29336d406" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
			<designed target="X" value="771" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Flip" value="0" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="19" ver="5"/>
			<designed target="Height" value="540" ver="5"/>
			<designed target="RoundingRadius" value="0" ver="5"/>
			<designed target="PenColor" value="4278190080" ver="5"/>
			<designed target="PenStyle" value="0" ver="5"/>
			<designed target="PenWidth" value="1" ver="5"/>
			<designed target="BrushColor" value="4278190080" ver="5"/>
			<designed target="BrushStyle" value="0" ver="5"/>
		</object>
		<do access-modifier="private" name="SetOrientation" display-name="SetOrientation" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="om">
				<![CDATA[//Debug.Log("SetOrientation: " + String.ToString(orientation));

// размер A4 при разрешении 96 dpi будет 794 x 1123
a4height: double = 1123;
a4width: double = 794;

// в зависимости от ориентации страницы задаем ее размер
Width = orientation==0 ? a4width : a4height;
Height = orientation==0 ? a4height : a4width;
UpdateLayout();]]>
			</body>
			<param access-modifier="private" name="orientation" display-name="" uuid="13b3edf9-6424-4995-a5ac-8156af5b7857" base-type="uint1" base-type-id="f73099bc-ee13-42cf-82bb-87368b826707" ver="5"/>
		</do>
	</object>
	<object access-modifier="private" name="pChart" display-name="pChart" uuid="157d3301-68e0-43b3-8bc8-428d73452682" base-type="Trends_Chart" base-type-id="659f73ba-7fa5-4aa4-ac4d-623541275829" base-const="true" base-ref="true" ver="5"/>
	<object access-modifier="private" name="Params" display-name="Params" uuid="7a3fc6ab-4b3a-46ac-8395-51056ed26a02" base-type="Trends_Parameters" base-type-id="b3130c37-74d0-4745-864b-c3a1702c818e" ver="5">
		<init target="pExParams" ver="5" ref="ExParams"/>
	</object>
	<object access-modifier="private" name="pOnPrint" display-name="pOnPrint" uuid="b69d0846-2abc-485d-bf2e-ff6b5bed79ba" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5"/>
	<object access-modifier="private" name="pOnPrintPreview" display-name="pOnPrintPreview" uuid="8dece33d-1b30-4e3c-a6f3-f2df8703d230" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5"/>
	<object access-modifier="private" name="pOnClosed" display-name="pOnClosed" uuid="085453d1-a693-4fb9-8632-42dbfa049b0a" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5"/>
	<designed target="WindowIconPath" value="Trends_Icons/Print16.png" ver="5"/>
	<do-on access-modifier="private" name="Handler_3" display-name="Handler_3" ver="5" event="WindowSizeChanged">
		<body kind="om">
			<![CDATA[Width = WindowWidth;
Height = WindowHeight;
UpdateLayout();]]>
		</body>
	</do-on>
	<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="5" event="Closed">
		<body kind="om">
			<![CDATA[pChart.EnableTitlePrint = Toolbar.cbShowTitle.State;
pChart.TitlePrint = Toolbar.edtTitle.Text;
pOnClosed.Invoke();]]>
		</body>
	</do-on>
	<do access-modifier="private" name="UpdateLayout" display-name="UpdateLayout" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
		<body kind="om">
			<![CDATA[Toolbar.Width = Width;

Buttons.Y = Height - Buttons.Height;
Buttons.Width = Width;
Buttons.CloseButton.X = Buttons.Width - Buttons.CloseButton.Width - 10;

UpdatePageView();]]>
		</body>
	</do>
	<object access-modifier="private" name="ApSource_0" display-name="ApSource_0" uuid="63c3c215-df46-44a4-9d63-47a4f3bf70c3" base-type="ApSource" base-type-id="966603da-f05e-4b4d-8ef0-919efbf8ab2c" ver="5" description="" cardinal="1">
		<designed target="Location" value="" ver="5"/>
		<designed target="Port" value="4388" ver="5"/>
		<designed target="HistoryPort" value="4950" ver="5"/>
		<designed target="Path" value="" ver="5"/>
		<designed target="Active" value="false" ver="5"/>
		<designed target="ReAdvise" value="0" ver="5"/>
		<designed target="ClientDisplayName" value="HMI" ver="5"/>
		<designed target="ClientId" value="HMI" ver="5"/>
	</object>
	<object access-modifier="private" name="ExParams" display-name="ExParams" uuid="2c682b43-b1c7-4763-8e0d-40565abf6a54" base-type="Trends_Parameters" base-type-id="b3130c37-74d0-4745-864b-c3a1702c818e" ver="5"/>
	<designed target="Flip" value="0" ver="5"/>
	<param access-modifier="private" name="AllowSelectPrinter" display-name="AllowSelectPrinter" uuid="8f64b881-d2ef-4f21-90cc-30d4da4e57ba" base-type="bool" base-type-id="7c9fe1ab-1ee2-42d8-939f-94ce3e89fca8" ver="5" description=""/>
	<init target="AllowSelectPrinter" ver="5" value="true"/>
	<param access-modifier="private" name="init_Theme" display-name="Тема оформления" uuid="7917a882-30f4-42af-8242-6171690ca364" base-type="Trends_Theme" base-type-id="3fbfa4c2-c742-4bec-94dc-d1bcb7ef25b6" base-const="true" base-ref="true" ver="5"/>
	<do-trace access-modifier="private" target="BrushColor" ver="5">
		<body>
			<![CDATA[private.pTheme.BackgroundColor]]>
		</body>
	</do-trace>
	<do access-modifier="private" name="UpdatePageView" display-name="UpdatePageView" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
		<body kind="om">
			<![CDATA[pageMaxHeight: double = (Height - Toolbar.Height - Buttons.Height - 10);

// выбираем масштаб отображения, чтобы вместился в размер формы
fw: double = (Width - 10)/Page.Width;
fh: double = pageMaxHeight/Page.Height;
Page.Scale = Math.Min(1, Math.Min(fw, fh));

// корректируем положение страницы относительно центра
Page.X = 5 + (Width - 10 - Page.Width)/2;
Page.Y = Toolbar.Height + 5 + (pageMaxHeight - Page.Height)/2;]]>
		</body>
	</do>
	<param access-modifier="private" name="init_ScreenKeyboard" display-name="Вызов экранной клавиатуры" uuid="79b5a255-aa54-4a54-89b0-19ca6ab8cd89" base-type="ScreenKeyboardOptions" base-type-id="0589bc8e-fbb2-4f0e-b5d2-f0d825538ef1" ver="5" description="" cardinal="1" base-ref="true">
		<init target="Enabled" ver="5" value="false"/>
	</param>
	<object access-modifier="private" name="Buttons" display-name="Buttons" uuid="9663a821-b282-4bec-8855-e93e359d2187" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
		<designed target="X" value="0" ver="5"/>
		<designed target="Y" value="605" ver="5"/>
		<designed target="ZValue" value="0" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Scale" value="1" ver="5"/>
		<designed target="Flip" value="0" ver="5"/>
		<designed target="Visible" value="true" ver="5"/>
		<designed target="Opacity" value="1" ver="5"/>
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="Tooltip" value="" ver="5"/>
		<designed target="Width" value="800" ver="5"/>
		<designed target="Height" value="45" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="0xff000000" ver="5"/>
		<designed target="PenStyle" value="0" ver="5"/>
		<designed target="PenWidth" value="1" ver="5"/>
		<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
		<designed target="BrushStyle" value="0" ver="5"/>
		<object access-modifier="private" name="ScreenKeyboardButton" display-name="ScreenKeyboardButton" uuid="10cfe6c5-2b08-4b7b-bc66-998a21820295" base-type="ScreenKeyboardButton" base-type-id="e7774fc7-d5aa-4318-b97c-99203dbd1671" ver="5" description="" cardinal="1">
			<designed target="X" value="5" ver="5"/>
			<designed target="Y" value="15" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="25" ver="5"/>
			<designed target="Height" value="25" ver="5"/>
			<init target="pTheme" ver="5" ref="here.init_Theme"/>
			<init target="init_Options" ver="5" ref="here.init_ScreenKeyboard"/>
		</object>
		<object access-modifier="private" name="CloseButton" display-name="CloseButton" uuid="b56f9190-7204-4d5c-8597-14e528016621" base-type="Button" base-type-id="61e46e4a-827f-4dd2-ac8a-b68bcaddf442" ver="5">
			<designed target="X" value="705" ver="5"/>
			<designed target="Y" value="5" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="80" ver="5"/>
			<designed target="Height" value="25" ver="5"/>
			<designed target="Checkable" value="false" ver="5"/>
			<designed target="Text" value="Закрыть" ver="5"/>
			<designed target="TextAlignment" value="132" ver="5"/>
			<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
			<designed target="FontColor" value="4278190080" ver="5"/>
			<designed target="OnClickFontColor" value="4278190080" ver="5"/>
			<designed target="OnHoverFontColor" value="4278190080" ver="5"/>
			<designed target="BrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="BrushStyle" value="1" ver="5"/>
			<designed target="OnClickBrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="OnClickBrushStyle" value="1" ver="5"/>
			<designed target="OnHoverBrushColor" value="0xffe8e8e8" ver="5"/>
			<designed target="OnHoverBrushStyle" value="1" ver="5"/>
			<designed target="PenColor" value="0xff808080" ver="5"/>
			<designed target="PenStyle" value="1" ver="5"/>
			<designed target="PenWidth" value="1" ver="5"/>
			<designed target="OnClickPenColor" value="0xff000000" ver="5"/>
			<designed target="OnClickPenStyle" value="1" ver="5"/>
			<designed target="OnClickPenWidth" value="1" ver="5"/>
			<designed target="OnHoverPenColor" value="0xff00aaff" ver="5"/>
			<designed target="OnHoverPenStyle" value="1" ver="5"/>
			<designed target="OnHoverPenWidth" value="1" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ButtonPressed" form-action="close"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="DisabledFontColor" value="4278190080" ver="5"/>
			<designed target="DisabledBrushColor" value="4288716960" ver="5"/>
			<designed target="DisabledBrushStyle" value="1" ver="5"/>
			<designed target="DisabledPenColor" value="4288716960" ver="5"/>
			<designed target="DisabledPenStyle" value="1" ver="5"/>
			<designed target="DisabledPenWidth" value="1" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Checked" value="false" ver="5"/>
			<designed target="Flip" value="0" ver="5"/>
		</object>
	</object>
</type>

