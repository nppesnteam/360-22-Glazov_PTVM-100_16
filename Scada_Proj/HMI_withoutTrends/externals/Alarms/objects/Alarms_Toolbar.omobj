<type access-modifier="private" name="Alarms_Toolbar" display-name="Alarms_Toolbar" uuid="df35e6da-79f5-47c5-bafc-8f537dac5d59" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="">
	<designed target="X" value="0" ver="5"/>
	<designed target="Y" value="0" ver="5"/>
	<designed target="ZValue" value="0" ver="5"/>
	<designed target="Rotation" value="0" ver="5"/>
	<designed target="Scale" value="1" ver="5"/>
	<designed target="Visible" value="true" ver="5"/>
	<designed target="Opacity" value="1" ver="5"/>
	<designed target="Enabled" value="true" ver="5"/>
	<designed target="Tooltip" value="" ver="5"/>
	<designed target="Width" value="1000" ver="5"/>
	<designed target="Height" value="32" ver="5"/>
	<designed target="RoundingRadius" value="0" ver="5"/>
	<designed target="PenColor" value="0xff808080" ver="5"/>
	<designed target="PenStyle" value="0" ver="5"/>
	<designed target="PenWidth" value="1" ver="5"/>
	<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
	<designed target="BrushStyle" value="1" ver="5"/>
	<object access-modifier="private" name="Layout" display-name="Layout" uuid="1b420ca9-0d1d-4b6e-9ee4-ce2da8d08e70" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="5">
		<designed target="Orientation" value="1" ver="5"/>
		<designed target="Gap" value="0" ver="5"/>
	</object>
	<object access-modifier="private" name="pAlarmsTable" display-name="pAlarmsTable" uuid="26931ff6-519e-48ab-8bd2-aef6be25bb43" base-type="Alarms_Table" base-type-id="521d4d69-1b32-4210-ae17-099df1125e3c" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="btnLogin" display-name="btnLogin" uuid="ba6b8dad-4f14-4ac1-94aa-14336a1bf7b5" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="3">
		<designed target="X" value="1" ver="3"/>
		<designed target="Y" value="7" ver="3"/>
		<designed target="Rotation" value="0" ver="3"/>
		<designed target="Tooltip" value="Сменить пользователя" ver="3"/>
		<object access-modifier="private" name="ChangePassword" display-name="ChangePassword" uuid="1b715455-0e91-433d-944f-ae31c6d276ff" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
			<designed target="Enabled" value="true" ver="4"/>
			<designed target="InvokeTrigger" value="false" ver="4"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
				<object access-modifier="private" uuid="0e4df958-fe67-45af-892a-bc1d49754cae" base-type="ChangePasswordDialog" base-type-id="bc08353b-5b47-467f-aa5f-1d3f7ab7119b" ver="4">
					<init target="UserId" ver="5">
						<expr>
							<![CDATA[LoginResult.UserId]]>
						</expr>
					</init>
					<init target="UserDisplayName" ver="5">
						<expr>
							<![CDATA[LoginResult.UserDisplayName]]>
						</expr>
					</init>
					<init target="AlwaysOnTop" ver="5" ref="pAlarmsTable.AlwaysOnTopForm"/>
					<init target="init_ScreenKeyboard" ver="5" ref="here.pScreenKeyboard"/>
					<init target="init_Theme" ver="5" ref="here.private.pTheme"/>
				</object>
			</do-on>
		</object>
		<object access-modifier="private" name="LoginResult" display-name="LoginResult" uuid="9fa7ef5c-da26-4709-9293-eb70ae574ef9" base-type="LoginDialogResult" base-type-id="5a70987d-09be-4ae7-90b3-76a00c6721bb" ver="4"/>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick" form-action="open-dialog" form-by-id="false">
			<object access-modifier="private" uuid="99aafaa9-bc97-4ead-aa03-758bd9cfca7e" base-type="LoginDialog" base-type-id="eb8d4a9b-7cd2-4fcf-81e1-67eed3b5c0d4" ver="4">
				<init target="ChangePassword" ver="5" ref="parent.ChangePassword"/>
				<init target="Result" ver="5" ref="parent.LoginResult"/>
				<init target="AlwaysOnTop" ver="5" ref="pAlarmsTable.AlwaysOnTopForm"/>
				<init target="init_ScreenKeyboard" ver="5" ref="here.pScreenKeyboard"/>
				<init target="init_Theme" ver="5" ref="here.private.pTheme"/>
			</object>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Login24.png"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnLogin_HideFlag && pPermissions.Context.UsingSecurity]]>
			</body>
		</do-trace>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="Separator_1" display-name="Separator_1" uuid="21e7cd83-0b25-48fe-a77b-51818a8cb62f" base-type="ToolbarSeparator" base-type-id="0874ba53-66f8-4e74-b0d8-6e8f95558824" ver="5">
		<designed target="X" value="20" ver="5"/>
		<designed target="Y" value="7" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[btnLogin.IsVisible]]>
			</body>
		</do-trace>
		<designed target="Width" value="8" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnOperMode" display-name="btnOperMode" uuid="310e8cab-a9ab-40e6-9af9-61a73d814233" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="29" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Оперативный режим" ver="2"/>
		<do-trace access-modifier="private" target="Checked" ver="5">
			<body>
				<![CDATA[pAlarmsTable.ActiveMode == 0]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnOperMode_HideFlag && pPermissions.Permission.ViewCurrentEvents]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[if (pAlarmsTable.ActiveMode != 0) OnOperMode.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Operative24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnHistMode" display-name="btnHistMode" uuid="f445e343-6107-4c54-a08d-80bc771cbaef" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="49" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Исторический режим" ver="2"/>
		<do-trace access-modifier="private" target="Checked" ver="5">
			<body>
				<![CDATA[pAlarmsTable.ActiveMode == 1]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnHistMode_HideFlag && pPermissions.Permission.ViewEventHistory]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[if (pAlarmsTable.ActiveMode != 1) OnHistMode.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Historical24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="Separator_2" display-name="Separator_2" uuid="c9419776-6069-45a7-aa58-ebc818ce15d3" base-type="ToolbarSeparator" base-type-id="0874ba53-66f8-4e74-b0d8-6e8f95558824" ver="5">
		<designed target="X" value="68" ver="5"/>
		<designed target="Y" value="7" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[btnOperMode.IsVisible ||
btnHistMode.IsVisible]]>
			</body>
		</do-trace>
		<designed target="Width" value="8" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSettings" display-name="btnSettings" uuid="d0bed42d-e406-4dfc-bbfb-aa2e3a5642f5" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="77" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Параметры..." ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSettings_HideFlag && pPermissions.Permission.EditingSettings]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnSettings.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Options24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnOpen" display-name="btnOpen" uuid="143abcc6-4f45-48f6-8265-1f52938c0a0a" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="97" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Открыть..." ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnOpen_HideFlag]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Active" ver="5">
			<body>
				<![CDATA[btnOpenActive]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnLoadFile.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/OpenFile24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSave" display-name="btnSave" uuid="e50591fc-37e4-43cd-96da-377a8c8f10a6" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="117" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Сохранить..." ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSave_HideFlag]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Active" ver="5">
			<body>
				<![CDATA[!pAlarmsTable.private.LoadSaveBusy && !pAlarmsTable.private.TableIsEmpty]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[exportFolder: string = pConfig.Export.ExportPath;
Alarms_Tools.File.CreateRecursiveFolder(exportFolder);
if (Alarms_Tools.File.Exists(exportFolder))
	pAlarmsTable.Dialogs.ShowSaveDialog.Invoke();
else
	pAlarmsTable.Dialogs.Message.Error("Заданный путь '"+exportFolder+"' недоступен.", here.private.pTheme.GetViewSettings(), true);
]]>
			</body>
		</do-on>
		<init target="Checked" ver="5" value="false"/>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/SaveFile24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnExport" display-name="btnExport" uuid="45f6233d-7548-42e2-8756-046dff2de0bd" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="137" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Экспорт..." ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnExport_HideFlag && pPermissions.Permission.ExportData]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Active" ver="5">
			<body>
				<![CDATA[!pAlarmsTable.private.LoadSaveBusy && !pAlarmsTable.private.TableIsEmpty]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnExport.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/ExportToFile24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnPrint" display-name="btnPrint" uuid="f9e6c6b6-fec9-4a74-a019-f47a66660535" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="157" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Печать..." ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnPrint_HideFlag && pPermissions.Permission.Printing]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Active" ver="5">
			<body>
				<![CDATA[!pAlarmsTable.private.LoadSaveBusy && !pAlarmsTable.private.TableIsEmpty]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnPrint.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Print24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="Separator_3" display-name="Separator_3" uuid="972b8286-526c-4c06-adee-6312d04c5eee" base-type="ToolbarSeparator" base-type-id="0874ba53-66f8-4e74-b0d8-6e8f95558824" ver="5">
		<designed target="X" value="176" ver="5"/>
		<designed target="Y" value="7" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[btnSettings.IsVisible ||
btnOpen.IsVisible ||
btnSave.IsVisible ||
btnExport.IsVisible ||
btnPrint.IsVisible]]>
			</body>
		</do-trace>
		<designed target="Width" value="8" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnFiltr" display-name="btnFiltr" uuid="e7303d62-cf14-4dc6-aaae-22e02b2544ae" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="185" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Фильтр отображения..." ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnFiltr_HideFlag && pPermissions.Permission.Filtering]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnViewFilter.Invoke();]]>
			</body>
		</do-on>
		<init target="pDropDown" ver="5" ref="btnFiltrList"/>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Filter24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnFiltrList" display-name="btnFiltrList" uuid="100cd191-76db-400d-b494-6baefb30897e" base-type="ToolbarDropDown" base-type-id="0e258e56-d922-4a8f-b8c3-7d577d177609" ver="3">
		<designed target="X" value="203" ver="3"/>
		<designed target="Y" value="7" ver="3"/>
		<designed target="Rotation" value="0" ver="3"/>
		<designed target="Tooltip" value="Фильтр отображения..." ver="3"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnFiltr_HideFlag && pPermissions.Permission.Filtering]]>
			</body>
		</do-trace>
		<init target="pButton" ver="5" ref="btnFiltr"/>
		<designed target="Width" value="11" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnMenuOpen.Invoke();]]>
			</body>
		</do-on>
		<object access-modifier="private" name="OnMenuOpen" display-name="OnMenuOpen" uuid="1d933c69-a116-4f66-9321-d1326a101b01" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="3">
			<do-on access-modifier="private" name="Handler_Invoked" display-name="Handler_Invoked" ver="5" event="Invoked" form-action="open-new" form-by-id="false">
				<object access-modifier="private" uuid="b94b0a2c-66fa-48bd-bc22-5d19635371fe" base-type="Menu" base-type-id="07bb4545-980a-4140-bbaa-4d1397447864" ver="5">
					<init target="PointHeight" ver="5" value="30"/>
					<init target="Items" ver="5">
						<expr>
							<![CDATA[GetMenuItems()]]>
						</expr>
					</init>
					<init target="pResult" ver="5" ref="MenuResult"/>
					<init target="WindowX" ver="5">
						<expr>
							<![CDATA[btnFiltr.ScreenX(0, 0)]]>
						</expr>
					</init>
					<init target="WindowY" ver="5">
						<expr>
							<![CDATA[btnFiltr.ScreenY(0, btnFiltr.Height)]]>
						</expr>
					</init>
					<init target="pAction" ver="5" ref="btnFiltrList.OnMenuClick"/>
					<init target="pOnClosed" ver="5" ref="btnFiltrList.MenuClosed"/>
					<init target="init_Theme" ver="5" ref="here.private.theme"/>
				</object>
			</do-on>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<object access-modifier="private" name="MenuResult" display-name="MenuResult" uuid="56e12112-2713-4ea5-9193-a25f06cea430" base-type="MenuResult" base-type-id="0fe7658c-92f4-4af7-b038-3594414ac651" ver="5"/>
			<do-on access-modifier="private" name="Handler_Invoked2" display-name="Handler_Invoked2" ver="5" event="Invoked">
				<body kind="om">
					<![CDATA[Checked = true;]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="OnMenuClick" display-name="OnMenuClick" uuid="8329dd9c-c88e-4d94-b2ac-04104fcae5d4" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
				<body kind="om">
					<![CDATA[cmd: string = OnMenuOpen.MenuResult.Id;

if (cmd == "withoutFilter")
	pViewFilter.UsedFiltersClear();
else if (cmd == "customFilter")
{
	OnViewFilter.Invoke();
}
else if (String.StartsWith(cmd, "preset"))
{
	i: int4 = String.ToInt4(String.SubString(cmd, 6), -1);
	if (i > -1)
		pViewFilter.UsedFiltersPreset(pConfig.PresetFilters.name[i]);
}

// при изменении видимости столбцов обновляем меню
OnMenuOpen.MenuResult.UpdateItems = GetMenuItems();
]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="MenuClosed" display-name="MenuClosed" uuid="a3eea09c-57d4-4aba-a669-5ca3060242b8" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
				<body kind="om">
					<![CDATA[Checked = false;]]>
				</body>
			</do-on>
		</object>
		<do access-modifier="private" name="GetMenuItems" display-name="GetMenuItems" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
			<body kind="javascript">
				<![CDATA[// формируем коллекцию предустановленных фильтров
var presets = [];
for (let i = 0; i < pConfig.PresetFilters.used.Length; i++)
{
	if (pConfig.PresetFilters.used[i])
	{
		var filterName = pConfig.PresetFilters.name[i];
		presets.push({ 'id': "preset" + i, 'title': filterName,
			'checked': pViewFilter.UsedFiltersContainKey(filterName),
			'staysOpen': (pConfig.PresetFilters.mode>0) });
	}
}

var items = [];

// без фильтрации
var withoutFilter = !pAlarmsTable.StatePanel.ViewFilterON.Value &&
	pViewFilter.used_filters == ""; // #25888 может быть задан пустой предустановленный
items.push({ 'id': "withoutFilter", 'title': "Без фильтра", 'checked': withoutFilter });
items.push({ 'title': "-" });

// пользовательский фильтр
var presetFilterActive = presets.some(p => p.checked == true);
var customFilterUsed = pAlarmsTable.StatePanel.ViewFilterON.Value && !presetFilterActive &&
	pViewFilter.used_filters == ""; // #25889 фильтр должен быть задан явно
items.push({ 'id': "customFilter", 'title': "Фильтр пользователя", 'checked': customFilterUsed });

// предустановленные фильтры
if (presets.length > 0)
{
	items.push({ 'title': "-" });
	for(let i = 0; i < presets.length; i++)
		items.push(presets[i]);
}

return JSON.stringify(items);]]>
			</body>
		</do>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSort" display-name="btnSort" uuid="1679ad51-118e-48be-bd65-a7ef807f963a" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="216" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Сортировка..." ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSort_HideFlag && pPermissions.Permission.EventTableSort]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MousePress">
			<body kind="om">
				<![CDATA[OnSortForm.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Sort24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="Separator_4" display-name="Separator_4" uuid="5b2718ca-699a-4e4b-bb04-219b974f3a38" base-type="ToolbarSeparator" base-type-id="0874ba53-66f8-4e74-b0d8-6e8f95558824" ver="5">
		<designed target="X" value="235" ver="5"/>
		<designed target="Y" value="7" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[btnFiltr.IsVisible ||
btnFiltrList.IsVisible ||
btnSort.IsVisible]]>
			</body>
		</do-trace>
		<designed target="Width" value="8" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnAckSel" display-name="btnAckSel" uuid="9835258d-81ca-4e60-a3b1-8245e6269505" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="244" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Квитировать" ver="2"/>
		<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[pAlarmsTable.AckSelected();]]>
			</body>
		</do-on>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnAckSel_HideFlag && pAlarmsTable.ActiveMode == 0 && pPermissions.Permission.Acknowledgment]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Active" ver="5">
			<body>
				<![CDATA[!pAlarmsTable.private.Follow.CurrentFFLE]]>
			</body>
		</do-trace>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Acknowledge24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnAckAll" display-name="btnAckAll" uuid="454b1919-7531-44ab-9b52-c89a2657db99" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="264" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Квитировать все" ver="2"/>
		<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="5" event="MouseClick" form-by-id="false">
			<body kind="om">
				<![CDATA[pAlarmsTable.AckAll();]]>
			</body>
		</do-on>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnAckAll_HideFlag && pConfig.AckAllAvailable && pAlarmsTable.ActiveMode == 0 && pPermissions.Permission.Acknowledgment]]>
			</body>
		</do-trace>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/AcknowledgeAll24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnClearAll" display-name="btnClearAll" uuid="605f7de0-3779-477b-9892-e06c56d2564a" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="284" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Очистить список" ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[pAlarmsTable.ActiveMode == 0 && !pConfig.ToolBar.btnClearAll_HideFlag && pPermissions.Permission.ViewCurrentEvents && pPermissions.Permission.ClearingCurrentEvents]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Active" ver="5">
			<body>
				<![CDATA[!pAlarmsTable.SnapshotON]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnClearAll.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Clear24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSuppress" display-name="btnSuppress" uuid="a7b50b3e-1af9-44fc-aab0-73feb818184c" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="304" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Подавления и блокировки" ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSuppress_HideFlag && pPermissions.Permission.ViewCurrentEvents && pPermissions.Permission.Suppressions && pAlarmsTable.ActiveMode == 0 && (pConfig.Suppression.BlockIndefinite || pConfig.Suppression.SuppressIndefinite)]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnSuppressions.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/Supression24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSnapshot" display-name="btnSnapshot" uuid="4733375c-9bea-4471-a028-e26ea371aba2" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="324" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Снимок" ver="2"/>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[pAlarmsTable.SnapshotON = !pAlarmsTable.SnapshotON;]]>
			</body>
		</do-on>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSnapshot_HideFlag && pPermissions.Permission.Snapshot && pAlarmsTable.ActiveMode == 0]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="IconFile" ver="5">
			<body>
				<![CDATA[(pAlarmsTable.SnapshotON ? "Alarms_Icons/Play24.png" : "Alarms_Icons/Pause24.png")]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Tooltip" ver="5">
			<body>
				<![CDATA[pAlarmsTable.SnapshotON ? "Отключить режим снимка"
: "Включить режим снимка"]]>
			</body>
		</do-trace>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSndClear" display-name="btnSndClear" uuid="be778082-ae4c-443d-a5bb-0d0fdc57af8c" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="344" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Очистить очередь звуков" ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSndClear_HideFlag && pPermissions.Permission.SoundManagment && pAlarmsTable.ActiveMode == 0]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnSoundClear.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/SoundStop24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSndNext" display-name="btnSndNext" uuid="dfa2483f-80ba-441e-af4c-6032c0e96e88" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="364" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Tooltip" value="Пропустить звук" ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSndNext_HideFlag && pPermissions.Permission.SoundManagment && pAlarmsTable.ActiveMode == 0]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_5" display-name="Handler_5" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnSoundSkip.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="IconFile" ver="5" value="Alarms_Icons/SoundForward24.png"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="btnSndMute" display-name="btnSndMute" uuid="14fd223f-f938-4dab-9f9a-0081ebb5d197" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
		<designed target="X" value="384" ver="2"/>
		<designed target="Y" value="7" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<do-trace access-modifier="private" target="IsVisible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.btnSndMute_HideFlag && pPermissions.Permission.SoundManagment && pAlarmsTable.ActiveMode == 0]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="IconFile" ver="5">
			<body>
				<![CDATA[(Mute ? "Alarms_Icons/SoundPlay24.png" : "Alarms_Icons/SoundMute24.png")]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Tooltip" ver="5">
			<body>
				<![CDATA[Mute ? "Включить проигрывание звуков"
: "Отключить проигрывание звуков"]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_5" display-name="Handler_5" ver="5" event="MouseClick">
			<body kind="om">
				<![CDATA[OnMuteSwitch.Invoke();]]>
			</body>
		</do-on>
		<designed target="Width" value="18" ver="5"/>
		<designed target="Height" value="18" ver="5"/>
		<init target="init_Theme" ver="5" ref="here.private.theme"/>
	</object>
	<object access-modifier="private" name="RecHistory" display-name="RecHistory" uuid="1d58ba4b-4ad6-4dec-94a8-9e54ddae0ea2" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
		<designed target="X" value="384" ver="2"/>
		<designed target="Y" value="1" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<object access-modifier="private" name="Interval" display-name="Interval" uuid="bda27c6f-9ce7-4552-bf24-d3596d39daf3" base-type="IntervalEditor" base-type-id="ef4b0474-0376-4b1d-844c-682e26880a1e" ver="5" description="" cardinal="1">
			<designed target="X" value="0" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="390" ver="5"/>
			<designed target="Height" value="30" ver="5"/>
			<do-trace access-modifier="private" target="Begin" ver="5">
				<body>
					<![CDATA[pAlarmsTable.TableOne.UserInterval.TimeStart]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="Error" ver="5">
				<body>
					<![CDATA[RecHistory.Error]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="End" ver="5">
				<body>
					<![CDATA[pAlarmsTable.TableOne.UserInterval.TimeEnd]]>
				</body>
			</do-trace>
			<init target="pIntervalChanged" ver="5" ref="DateTimeChanged"/>
			<object access-modifier="private" name="SizeLimits" display-name="SizeLimits" uuid="90b49c71-aaf6-43b5-9c0e-436f6c05d4df" base-type="LayoutSizeLimits" base-type-id="10342c1f-560b-4160-9de5-7e2c08026f47" ver="5" description="" cardinal="1">
				<designed target="MinWidth" value="0" ver="5"/>
				<designed target="MinHeight" value="0" ver="5"/>
				<designed target="MaxWidth" value="410" ver="5"/>
				<designed target="MaxHeight" value="16777215" ver="5"/>
			</object>
			<init target="init_Theme" ver="5" ref="here.private.theme"/>
		</object>
		<object access-modifier="private" name="btnHistRequest" display-name="btnHistRequest" uuid="e001caa8-6437-4302-9946-5943c3ed57c0" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="2">
			<designed target="X" value="390" ver="2"/>
			<designed target="Y" value="1" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Tooltip" value="Запросить данные" ver="2"/>
			<do-trace access-modifier="private" target="Tooltip" ver="5">
				<body>
					<![CDATA[(!pAlarmsTable.private.LoadSaveBusy.LoadingHistory)?("Запросить данные"):("Прервать запрос истории")]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="IconFile" ver="5">
				<conditional-expr>
					<condition>
						<![CDATA[pAlarmsTable.private.LoadSaveBusy.LoadingHistory]]>
					</condition>
					<expr>
						<![CDATA["Alarms_Icons/CancelRrequest24.png"]]>
					</expr>
				</conditional-expr>
				<conditional-expr>
					<condition>
						<![CDATA[!pAlarmsTable.StatePanel.RequestFilterON]]>
					</condition>
					<expr>
						<![CDATA["Alarms_Icons/Request24.png"]]>
					</expr>
				</conditional-expr>
				<conditional-expr>
					<condition>
						<![CDATA[pAlarmsTable.StatePanel.RequestFilterON]]>
					</condition>
					<expr>
						<![CDATA["Alarms_Icons/RequestWithFilter24.png"]]>
					</expr>
				</conditional-expr>
			</do-trace>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
				<body kind="om">
					<![CDATA[if (pAlarmsTable.private.LoadSaveBusy.LoadingHistory)
	OnCancelHistoryQuery.Invoke();
else	pAlarmsTable.ReloadHistory();]]>
				</body>
			</do-on>
			<init target="pDropDown" ver="5" ref="btnHistRequestList"/>
			<designed target="Width" value="29" ver="5"/>
			<designed target="Height" value="29" ver="5"/>
			<do-trace access-modifier="private" target="Active" ver="5">
				<body>
					<![CDATA[pAlarmsTable.private.LoadSaveBusy || Error == ""]]>
				</body>
			</do-trace>
			<init target="init_Theme" ver="5" ref="here.private.theme"/>
		</object>
		<object access-modifier="private" name="btnHistRequestList" display-name="btnHistRequestList" uuid="afcd25b4-7031-4c09-a6f9-bef9d8e91723" base-type="ToolbarDropDown" base-type-id="0e258e56-d922-4a8f-b8c3-7d577d177609" ver="3">
			<designed target="X" value="420" ver="3"/>
			<designed target="Y" value="1" ver="3"/>
			<designed target="Rotation" value="0" ver="3"/>
			<designed target="Tooltip" value="Запросить данные" ver="3"/>
			<do-trace access-modifier="private" target="Active" ver="5">
				<body>
					<![CDATA[!pAlarmsTable.private.LoadSaveBusy.LoadingHistory && Error == ""]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="IsVisible" ver="5">
				<body>
					<![CDATA[!pConfig.ToolBar.HistoryPanel_HideFlag && pPermissions.Permission.Filtering && (!pConfig.ToolBar.HistoryMenu_PresetInterval_HideFlag || !pConfig.ToolBar.HistoryMenu_RequestFilter_HideFlag || !pConfig.ToolBar.HistoryMenu_Chronology_HideFlag)]]>
				</body>
			</do-trace>
			<init target="pButton" ver="5" ref="btnHistRequest"/>
			<designed target="Width" value="11" ver="5"/>
			<designed target="Height" value="29" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
				<body kind="om">
					<![CDATA[MenuOpened.Invoke();
btnHistRequestList.Checked = true;]]>
				</body>
			</do-on>
			<object access-modifier="private" name="MenuOpened" display-name="MenuOpened" uuid="f4cfe58a-2661-4a95-bd66-193990a0e206" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="3">
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-new" form-by-id="false">
					<object access-modifier="private" uuid="459266d6-1684-400a-8bc0-1bc1bdc033c8" base-type="Menu" base-type-id="07bb4545-980a-4140-bbaa-4d1397447864" ver="5">
						<init target="PointHeight" ver="5" value="30"/>
						<init target="Items" ver="5">
							<expr>
								<![CDATA[GetMenuItems()]]>
							</expr>
						</init>
						<init target="pAction" ver="5" ref="OnMenuClick"/>
						<init target="pOnClosed" ver="5" ref="MenuClosed"/>
						<init target="WindowX" ver="5">
							<expr>
								<![CDATA[btnHistRequest.ScreenX(0, 0)]]>
							</expr>
						</init>
						<init target="WindowY" ver="5">
							<expr>
								<![CDATA[btnHistRequest.ScreenY(0, btnHistRequest.Height)]]>
							</expr>
						</init>
						<init target="pResult" ver="5" ref="MenuResult"/>
						<init target="init_Theme" ver="5" ref="here.private.theme"/>
					</object>
				</do-on>
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
			</object>
			<do access-modifier="private" name="GetMenuItems" display-name="GetMenuItems" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
				<body kind="javascript">
					<![CDATA[var items = [];
if (!pConfig.ToolBar.HistoryMenu_PresetInterval_HideFlag.Value)
{
	items.push({ 'id': "last10", 'title': "Последние 10 минут" });
	items.push({ 'id': "last30", 'title': "Последние 30 минут" });
	items.push({ 'id': "last60", 'title': "Последний час" });
	items.push({ 'id': "last360", 'title': "Последние 6 часов" });
	items.push({ 'id': "last720", 'title': "Последние 12 часов" });
	items.push({ 'id': "last1440", 'title': "Последние сутки" });
}
if (!pConfig.ToolBar.HistoryMenu_RequestFilter_HideFlag.Value)
{
	if (items.length>0)
		items.push({ 'title': "-" });
	items.push({ 'id': "withoutFilter", 'title': "Без фильтра", 'checked': !pAlarmsTable.StatePanel.RequestFilterON.Value });
	items.push({ 'id': "customFilter", 'title': "Запрос с фильтрацией", 'checked': pAlarmsTable.StatePanel.RequestFilterON.Value });
}
if (!pConfig.ToolBar.HistoryMenu_Chronology_HideFlag.Value)
{
	if (items.length>0)
		items.push({ 'title': "-" });
	items.push({ 'id': "byGeneration", 'title': "По времени генерации", 'checked': (pAlarmsTable.EventsChronology.Value == 0) });
	items.push({ 'id': "byActivation", 'title': "По времени срабатывания", 'checked': (pAlarmsTable.EventsChronology.Value == 1) });
}
return JSON.stringify(items);]]>
				</body>
			</do>
			<object access-modifier="private" name="OnMenuClick" display-name="OnMenuClick" uuid="9677ca7d-7923-422f-bf66-6305e62ceb3b" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[cmd: string = MenuResult.Id;

if (cmd == "withoutFilter")
{
	pAlarmsTable.TableOne.SetRequestFilter("");
	pAlarmsTable.ReloadHistory();
}
else if (cmd == "customFilter")
{
	OnRequestFilter.Invoke();
}
else if (cmd == "byGeneration")
{
	OnChronologySet.Args.Push("0");
	OnChronologySet.Invoke();
}
else if (cmd == "byActivation")
{
	OnChronologySet.Args.Push("1");
	OnChronologySet.Invoke();
}
else if (String.StartsWith(cmd, "last"))
{
	text: string = String.Replace(cmd, "last", "");
	interval: double = String.ToDouble(text, 10);
	t: uint8 = DateTime.Now();
	if (!pAlarmsTable.private.LoadSaveBusy)
		pAlarmsTable.SetHistoricalInterval(DateTime.AddMinutes(t, -interval), t);
}]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="MenuClosed" display-name="MenuClosed" uuid="d39161d4-735c-4d6e-a238-41f2017676b1" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[btnHistRequestList.Checked = false;]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="MenuResult" display-name="MenuResult" uuid="efed8e68-e642-4f35-b2ee-ba69604d62a9" base-type="MenuResult" base-type-id="0fe7658c-92f4-4af7-b038-3594414ac651" ver="5"/>
			<init target="init_Theme" ver="5" ref="here.private.theme"/>
		</object>
		<designed target="Scale" value="1" ver="3"/>
		<designed target="Visible" value="true" ver="3"/>
		<designed target="Enabled" value="true" ver="3"/>
		<designed target="Tooltip" value="" ver="3"/>
		<designed target="ZValue" value="0" ver="3"/>
		<designed target="Opacity" value="1" ver="3"/>
		<designed target="Width" value="615" ver="5"/>
		<designed target="Height" value="30" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="4278190080" ver="5"/>
		<designed target="PenStyle" value="0" ver="5"/>
		<designed target="PenWidth" value="1" ver="5"/>
		<designed target="BrushColor" value="4278190080" ver="5"/>
		<designed target="BrushStyle" value="0" ver="5"/>
		<object access-modifier="private" name="Margins" display-name="Margins" uuid="5f371c88-a0c7-47a4-9f45-644a3845627e" base-type="LayoutMargins" base-type-id="d86ce751-1ea7-42c6-8d4b-10c651a2727d" ver="5" description="" cardinal="1">
			<designed target="Top" value="1" ver="5"/>
			<designed target="Bottom" value="1" ver="5"/>
			<designed target="Left" value="1" ver="5"/>
			<designed target="Right" value="1" ver="5"/>
		</object>
		<do-trace access-modifier="private" target="Visible" ver="5">
			<body>
				<![CDATA[!pConfig.ToolBar.HistoryPanel_HideFlag && pAlarmsTable.ActiveMode == 1 && pPermissions.Permission.ViewEventHistory]]>
			</body>
		</do-trace>
		<designed target="Flip" value="0" ver="5"/>
		<object access-modifier="private" name="DateTimeChanged" display-name="DateTimeChanged" uuid="e5a888fa-3e00-459d-93a3-ad861bec9998" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
				<body kind="om">
					<![CDATA[pAlarmsTable.TableOne.UserInterval.Set(Interval.Begin, Interval.End);
if (Interval.Begin >= Interval.End)
	Error = "Недопустимое значение границ интервала запроса истории";
else Error = "";]]>
				</body>
			</do-on>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
		</object>
		<object access-modifier="private" name="Error" display-name="Error" uuid="bcbfca78-8c2f-4bec-b123-b6987e69e17a" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="5" description="" cardinal="1"/>
	</object>
	<designed target="Flip" value="0" ver="5"/>
	<object access-modifier="private" name="private" display-name="private" uuid="1a81d062-24c6-4cf5-884b-6696af58b790" base-type="" base-type-id="00000000-0000-0000-0000-000000000000" ver="2">
		<object access-modifier="private" name="theme" display-name="theme" uuid="0dea941d-93f7-4613-8836-dd6dcd1248a4" base-type="ToolbarTheme" base-type-id="a7287382-701b-4e63-a794-2f3ce4c48f31" ver="5" description="" cardinal="1">
			<init target="init_Theme" ver="5" ref="here.init_Theme"/>
		</object>
		<object access-modifier="private" name="pTheme" display-name="pTheme" uuid="e2eedf3e-11ec-42d2-86d9-e7f5556a5b3c" base-type="Theme" base-type-id="05d4d7df-0f8e-4ec1-ac85-b5460e30af81" base-const="true" base-ref="true" ver="5" description=""/>
		<init target="pTheme" ver="5" ref="here.init_Theme"/>
	</object>
	<object access-modifier="private" name="pScreenKeyboard" display-name="pScreenKeyboard" uuid="b345140b-9879-4116-862f-f586c3927fa1" base-type="ScreenKeyboardOptions" base-type-id="0589bc8e-fbb2-4f0e-b5d2-f0d825538ef1" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="pConfig" display-name="pConfig" uuid="b6cd26dc-d2b8-43c5-b5c4-f80299208b29" base-type="Alarms_Config" base-type-id="cac958c3-d08c-4b7b-8345-d70ccc130514" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="pPermissions" display-name="pPermissions" uuid="fa7476c4-28ec-4a51-9c1b-674f8c29c02a" base-type="Alarms_Permissions" base-type-id="eaa1f2f7-6334-4d05-a44d-ca72425d2f9f" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="pViewFilter" display-name="pViewFilter" uuid="038c7769-065b-4039-8621-6d23e47e2179" base-type="Alarms_ViewFilter" base-type-id="ab719db0-02af-4b41-b039-70a478bd4e78" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="btnOpenActive" display-name="btnOpenActive" uuid="713a42c3-a62a-47d9-9589-653989497204" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5" description="" cardinal="1"/>
	<object access-modifier="private" name="Mute" display-name="Mute" uuid="054ca9f2-1d83-40e4-b03e-093b20ad711c" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5" description="" cardinal="1"/>
	<object access-modifier="private" name="OnViewFilter" display-name="OnViewFilter" uuid="5806add4-1b1c-499c-9655-9b85c7b2527f" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnPrint" display-name="OnPrint" uuid="57924158-4e8f-42cd-b552-be70990fbf90" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnSettings" display-name="OnSettings" uuid="f65bb7e2-846c-4505-993e-623eb6c0695f" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1" base-ref="true">
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="InvokeTrigger" value="false" ver="5"/>
	</object>
	<object access-modifier="private" name="OnSortForm" display-name="OnSortForm" uuid="9a17b6b1-0aff-4e29-8274-3cd6d4e0822f" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnSuppressions" display-name="OnSuppressions" uuid="c9cb1757-35c2-4895-871c-efefaedbe4fc" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnRequestFilter" display-name="OnRequestFilter" uuid="936fbc13-c787-480e-ba5f-5b6625ce9b41" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnCancelHistoryQuery" display-name="OnCancelHistoryQuery" uuid="28400566-e9b3-48e2-9633-42c923dd3d5c" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnExport" display-name="OnExport" uuid="262393b3-b558-4cbf-b87f-4e497fd72a51" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnClearAll" display-name="OnClearAll" uuid="0682c0d3-21d9-484d-9158-ea7e66bd9c82" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1" base-ref="true">
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="InvokeTrigger" value="false" ver="5"/>
	</object>
	<param access-modifier="private" name="init_Theme" display-name="Тема оформления" uuid="a685c45b-f5bb-406f-b28d-fbfa592ea7ff" base-type="Theme" base-type-id="05d4d7df-0f8e-4ec1-ac85-b5460e30af81" base-const="true" base-ref="true" ver="4"/>
	<do-trace access-modifier="private" target="BrushColor" ver="5">
		<body>
			<![CDATA[here.private.pTheme.ToolbarBrushColor]]>
		</body>
	</do-trace>
	<object access-modifier="private" name="OnLoadFile" display-name="OnLoadFile" uuid="5748fd38-75c2-4839-bb2a-65d833a88b93" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnMuteSwitch" display-name="OnMuteSwitch" uuid="3249b258-a56f-4d25-b608-53a6202506c2" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnSoundSkip" display-name="OnSoundSkip" uuid="2ef9238b-99a6-4edb-9dba-310ba468c5ca" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnSoundClear" display-name="OnSoundClear" uuid="37f71d44-cbfb-4c6c-a469-2e517c6e3990" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnChronologySet" display-name="OnChronologySet" uuid="02abddd4-8c49-423c-a258-fb06a17747f9" base-type="EventHandler" base-type-id="c01b71c2-42e8-4333-b70e-cc35fdf96f7e" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnOperMode" display-name="OnOperMode" uuid="0139022f-b4a8-4d82-8648-53e7e1b41a26" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="OnHistMode" display-name="OnHistMode" uuid="255862f0-5c49-41ef-ae59-44bfcef3e217" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" base-const="true" base-ref="true" ver="5" description=""/>
</type>

