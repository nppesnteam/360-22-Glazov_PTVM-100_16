<type ver="5" base-type-id="ffaf5544-6200-45f4-87ec-9dd24558a9d5" base-type="Form" uuid="27263222-1fc4-47a9-99ab-908623a121af" display-name="Statistics_App" name="Statistics_App" access-modifier="public">
	<designed target="WindowIconPath" value="Statistics_Icons/Statistics.ico" ver="5"/>
	<designed target="X" value="0" ver="5"/>
	<designed target="Y" value="0" ver="5"/>
	<designed target="Rotation" value="0" ver="5"/>
	<designed target="Width" value="800" ver="5"/>
	<designed target="Height" value="600" ver="5"/>
	<designed target="ZValue" value="0" ver="5"/>
	<designed target="Scale" value="1" ver="5"/>
	<designed target="Visible" value="true" ver="5"/>
	<designed target="Opacity" value="1" ver="5"/>
	<designed target="Enabled" value="true" ver="5"/>
	<designed target="Tooltip" value="" ver="5"/>
	<designed target="PenColor" value="0xff000000" ver="5"/>
	<designed target="PenStyle" value="0" ver="5"/>
	<designed target="PenWidth" value="1" ver="5"/>
	<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
	<designed target="BrushStyle" value="1" ver="5"/>
	<designed target="WindowX" value="0" ver="5"/>
	<designed target="WindowY" value="0" ver="5"/>
	<designed target="WindowWidth" value="800" ver="5"/>
	<designed target="WindowHeight" value="600" ver="5"/>
	<designed target="WindowCaption" value="Статистика" ver="5"/>
	<designed target="ShowWindowCaption" value="true" ver="5"/>
	<designed target="ShowWindowMinimize" value="true" ver="5"/>
	<designed target="ShowWindowMaximize" value="true" ver="5"/>
	<designed target="ShowWindowClose" value="true" ver="5"/>
	<designed target="AlwaysOnTop" value="false" ver="5"/>
	<designed target="WindowSizeMode" value="0" ver="5"/>
	<designed target="WindowBorderStyle" value="1" ver="5"/>
	<designed target="WindowState" value="0" ver="5"/>
	<designed target="WindowScalingMode" value="0" ver="5"/>
	<designed target="MonitorNumber" value="0" ver="5"/>
	<designed target="WindowPosition" value="0" ver="5"/>
	<designed target="WindowCloseMode" value="1" ver="5"/>
	<object access-modifier="private" name="private" display-name="private" uuid="fa95c207-dce8-4592-abc2-884534708606" base-type="" base-type-id="00000000-0000-0000-0000-000000000000" base-const="true" ver="5" description="">
		<object access-modifier="private" name="ShowInfo" display-name="ShowInfo" uuid="5e83bd6c-e5e9-4752-a96b-662a5e66a8d0" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
				<object access-modifier="private" uuid="bf522090-5e0a-4bb0-b5a5-ea8394103955" base-type="MessageDialog" base-type-id="a468f863-f603-4768-ad4b-e16bc34ea78e" ver="5">
					<init target="WindowCaption" ver="5" ref="title"/>
					<init target="Icon" ver="5" value="0"/>
					<init target="Buttons" ver="5" value="0"/>
					<init target="Message" ver="5" ref="message"/>
					<init target="CharactersPerLine" ver="5" value="60"/>
					<init target="pTheme" ver="5" ref="Theme"/>
				</object>
			</do-on>
			<object access-modifier="private" name="title" display-name="title" uuid="e9b442e0-4d5e-4401-ad1f-deea8b1eca54" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5" description="" cardinal="1"/>
			<object access-modifier="private" name="message" display-name="message" uuid="c5cd5401-581d-4e93-93e4-b6c124553f89" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5" description="" cardinal="1"/>
		</object>
		<object access-modifier="private" name="RecentlyFiles" display-name="RecentlyFiles" uuid="aa088180-06b2-4008-a1b3-624837290ec7" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="5" description="" cardinal="1"/>
		<do access-modifier="private" name="UpdateRecentlyFiles" display-name="UpdateRecentlyFiles" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[var recentlyFiles = [];
if (RecentlyFiles.Value != "")
	recentlyFiles = JSON.parse(RecentlyFiles.Value);

// удаляем путь, если он уже есть в списке
const index = recentlyFiles.indexOf(filePath);
if (index > -1)
	recentlyFiles.splice(index, 1);

// добавляем в начало списка
recentlyFiles.unshift(filePath);

// ограничиваем список десятью элементами
if (recentlyFiles.length > 10)
	recentlyFiles.splice(10);

RecentlyFiles = JSON.stringify(recentlyFiles);]]>
			</body>
			<param access-modifier="private" name="filePath" display-name="" uuid="14ec6fa7-14d6-4072-abb4-4d438fae276f" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5"/>
		</do>
		<object access-modifier="private" name="RecentlyConnections" display-name="RecentlyConnections" uuid="372832ec-769c-40e0-8881-842a9d48dc6f" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="5" description="" cardinal="1"/>
		<do access-modifier="private" name="UpdateRecentlyConnections" display-name="UpdateRecentlyConnections" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[var newConnection = JSON.parse(connection);
var recentlyConnections = [];
if (RecentlyConnections.Value != "")
	recentlyConnections = JSON.parse(RecentlyConnections.Value);

var index;
if (newConnection.filePath != undefined)
	index = recentlyConnections.findIndex(s => (s.filePath == newConnection.filePath));
else if (newConnection.location != undefined && newConnection.port != undefined)
	index = recentlyConnections.findIndex(s => (s.location == newConnection.location && s.port == newConnection.port));

if (index > -1 && index < recentlyConnections.length)
{
	var recentConnection = recentlyConnections[index];
	if (newConnection.title == "" && recentConnection.title != "")
		newConnection.title = recentConnection.title;
}

// удаляем, если уже есть в списке
if (index > -1)
	recentlyConnections.splice(index, 1);

// добавляем в начало списка
recentlyConnections.unshift(newConnection);

// ограничиваем список десятью элементами
if (recentlyConnections.length > 10)
	recentlyConnections.splice(10);

RecentlyConnections = JSON.stringify(recentlyConnections);]]>
			</body>
			<param access-modifier="private" name="connection" display-name="" uuid="39421f6c-ed74-49ad-afe6-4aedaf190e80" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5"/>
		</do>
		<do access-modifier="private" name="SaveSession" display-name="SaveSession" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[var filePath = GetSessionFilePath();
try
{
	var session = 
	{
		'Window': 
		{
			'X': WindowX,
			'Y': WindowY, 
			'Width': WindowWidth,
			'Height': WindowHeight,
			'State': WindowState
		},
		'Theme': JSON.parse(Theme.GetViewSettings()),
		'TreeVisible': Statistics.TreeVisible.Value
	};
	
	var recentlyConnections = private.RecentlyConnections.Value;
	if (recentlyConnections != "")
		session.RecentlyConnections = JSON.parse(recentlyConnections);
	
	if (private.RecentlyFiles.Value != "")
		session.RecentlyFiles = JSON.parse(private.RecentlyFiles.Value);
	
	var folder = Files.ParentPath(folder);
	Files.CreateRecursiveFolder(folder);
		
	Files.WriteTextFile(filePath, JSON.stringify(session, null, 2));
}
catch(error)
{
	log("Не удалось сохранить настройки сессии в "  + filePath + ":\n" + error);
}]]>
			</body>
		</do>
		<do access-modifier="private" name="LoadSession" display-name="LoadSession" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[var filePath = GetSessionFilePath();
if (Files.Exists(filePath))
{
	//log("Загрузка настроек сессии из файла "  + filePath);
	try
	{
		var session = JSON.parse(Files.ReadTextFile(filePath));
		
		var window = session.Window;
		if (window != undefined)
		{
			WindowX = window.X;
			WindowY = window.Y;
			WindowWidth = window.Width;
			WindowHeight = window.Height;
			WindowState = window.State;
		}
		
		var theme = session.Theme;
		if (theme != undefined)
			Theme.UpdateView(JSON.stringify(theme));
			
		Statistics.TreeVisible = session.TreeVisible != false;
		
		var recentlyConnections = session.RecentlyConnections;
		if (recentlyConnections != undefined)
			RecentlyConnections = JSON.stringify(recentlyConnections);
		
		var recentlyFiles = session.RecentlyFiles;
		if (recentlyFiles != undefined)
			RecentlyFiles = JSON.stringify(recentlyFiles);
	}
	catch(error)
	{
		log("Не удалось загрузить настройки сессии из "  + filePath + ":\n" + error);
	}
}]]>
			</body>
		</do>
		<do access-modifier="private" name="GetSessionFilePath" display-name="GetSessionFilePath" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
			<body kind="om">
				<![CDATA[folderPath: string = unit.ProductInfo.GetUserDataFolder();
return Files.CombinePath(folderPath, "session.json");]]>
			</body>
		</do>
		<do access-modifier="private" name="SaveSettings" display-name="SaveSettings" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[var filePath = GetSettingsFilePath();
try
{
	var settings = JSON.parse(Settings.ToJSON());
	
	settings.ScreenKeyboard = JSON.parse(ScreenKeyboard.ToJSON());
	settings.Permissions = { 'UseSecurity': Permissions.UseSecurity.Value };

	var folderPath = Files.ParentPath(filePath);
	Files.CreateRecursiveFolder(folderPath);
		
	Files.WriteTextFile(filePath, JSON.stringify(settings, null, 2));
}
catch(error)
{
	log("Не удалось сохранить настройки приложения в "  + filePath + ":\n" + error);
}]]>
			</body>
		</do>
		<do access-modifier="private" name="LoadSettings" display-name="LoadSettings" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[var filePath = GetSettingsFilePath();
if (Files.Exists(filePath))
{
	//log("Загрузка настроек приложения из файла "  + filePath);
	try
	{
		var json = Files.ReadTextFile(filePath);
		var settings = JSON.parse(json);
		
		Settings.FromJSON(json);

		var screenKeyboard = settings.ScreenKeyboard;
		if (screenKeyboard != undefined)
			ScreenKeyboard.FromJSON(JSON.stringify(screenKeyboard));
			
		var permissions = settings.Permissions;
		if (permissions != undefined)
			Permissions.UseSecurity = permissions.UseSecurity;
	}
	catch(error)
	{
		log("Не удалось загрузить настройки приложения из "  + filePath + ":\n" + error);
	}
}]]>
			</body>
		</do>
		<do access-modifier="private" name="GetSettingsFilePath" display-name="GetSettingsFilePath" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
			<body kind="om">
				<![CDATA[folderPath: string = unit.ProductInfo.GetProgramDataFolder();
return Files.CombinePath(folderPath, "app_settings.json");]]>
			</body>
		</do>
		<do access-modifier="private" name="GetParameterListFolder" display-name="GetParameterListFolder" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
			<body kind="om">
				<![CDATA[folder: string = Settings.ParameterListFolder;

// Если путь не указан, то используем специальную папку в папке с данными программы
if (folder == "")
	folder = Files.CombinePath(unit.ProductInfo.GetProgramDataFolder(), "ParameterLists");

return folder;]]>
			</body>
		</do>
	</object>
	<object access-modifier="private" name="Debug" display-name="Debug" uuid="d2b3b3c4-5cda-4da3-a371-f6ed46898f10" base-type="DebugTool" base-type-id="43946044-139a-43f4-a7b8-19a6074ffc56" ver="5"/>
	<object access-modifier="private" name="Files" display-name="Files" uuid="9f85b6b4-19ad-432c-b1b0-82c586426042" base-type="FileSystem" base-type-id="34d744f9-7303-4077-a3f7-9c06c0945512" ver="5">
		<designed target="RootPath" value="/" ver="5"/>
	</object>
	<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="WindowSizeChanged">
		<body kind="om">
			<![CDATA[Width = WindowWidth;
Height = WindowHeight;]]>
		</body>
	</do-on>
	<do-on access-modifier="private" name="Handler_6" display-name="Handler_6" ver="5" event="Opened">
		<body kind="om">
			<![CDATA[WindowUtils.CorrectPosition();]]>
		</body>
	</do-on>
	<object access-modifier="private" name="Theme" display-name="Theme" uuid="b8f9de72-ec13-45ab-8c78-55a189db56e8" base-type="Theme" base-type-id="05d4d7df-0f8e-4ec1-ac85-b5460e30af81" ver="5" description="" cardinal="1"/>
	<object access-modifier="private" name="WindowUtils" display-name="WindowUtils" uuid="d815600a-fc14-40fa-82ea-1c93a3842f5e" base-type="WindowUtils" base-type-id="4a818ada-44b1-4070-9b9d-c28dc3447ece" ver="5" description="" cardinal="1">
		<init target="pForm" ver="5" ref="here"/>
	</object>
	<object access-modifier="private" name="ToolbarPanel" display-name="ToolbarPanel" uuid="173481c1-6c17-433c-8367-3e1822d7b5eb" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
		<designed target="X" value="0" ver="5"/>
		<designed target="Y" value="0" ver="5"/>
		<designed target="ZValue" value="0" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Scale" value="1" ver="5"/>
		<designed target="Visible" value="true" ver="5"/>
		<designed target="Opacity" value="1" ver="5"/>
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="Tooltip" value="" ver="5"/>
		<designed target="Width" value="800" ver="5"/>
		<designed target="Height" value="30" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="0xff808080" ver="5"/>
		<designed target="PenStyle" value="0" ver="5"/>
		<designed target="PenWidth" value="1" ver="5"/>
		<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
		<designed target="BrushStyle" value="1" ver="5"/>
		<object access-modifier="private" name="btnConnect" display-name="btnConnect" uuid="7421da2d-3d26-4098-aeba-3e7cd03abfbf" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="5">
			<designed target="X" value="1" ver="5"/>
			<designed target="Y" value="6" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<init target="IconFile" ver="5" value="Statistics_Icons/Connect24.png"/>
			<designed target="Tooltip" value="Подключиться к серверу" ver="5"/>
			<init target="IsVisible" ver="5" value="true"/>
			<designed target="Width" value="18" ver="5"/>
			<designed target="Height" value="18" ver="5"/>
			<init target="pDropDown" ver="5" ref="btnConnectExt"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick">
				<body kind="om">
					<![CDATA[ConnectToServer.Invoke();]]>
				</body>
			</do-on>
			<do-trace access-modifier="private" target="Active" ver="5">
				<body>
					<![CDATA[ConnectToServer.Enabled]]>
				</body>
			</do-trace>
			<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
		</object>
		<object access-modifier="private" name="btnConnectExt" display-name="btnConnectExt" uuid="ec4cf761-be9c-4b3e-aa16-de76c669d07a" base-type="ToolbarDropDown" base-type-id="0e258e56-d922-4a8f-b8c3-7d577d177609" ver="5" description="" cardinal="1">
			<designed target="X" value="19" ver="5"/>
			<designed target="Y" value="6" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="11" ver="5"/>
			<designed target="Height" value="18" ver="5"/>
			<init target="pButton" ver="5" ref="btnConnect"/>
			<object access-modifier="private" name="MenuResult" display-name="MenuResult" uuid="4977cee5-c8e8-4916-8dad-18f7155dd5c0" base-type="MenuResult" base-type-id="0fe7658c-92f4-4af7-b038-3594414ac651" ver="5" description="" cardinal="1"/>
			<object access-modifier="private" name="MenuClick" display-name="MenuClick" uuid="b758c517-9b3f-4876-9c21-98a4b9f5c163" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="javascript">
						<![CDATA[if (MenuResult.Id == "ConnectToServer")
	ConnectToServer.Invoke();
else if (MenuResult.Id == "ConnectToSnapshot")
	ConnectToSnapshot.Invoke();
else if (MenuResult.Id == "clearList")
	here.private.RecentlyConnections = "";
else
{
	var connection = JSON.parse(MenuResult.Id);
	if (connection.filePath != undefined)
	{
		Statistics.Sources.ConnectToSnapshot(connection.filePath);
	}
	else if (connection.location != undefined && connection.port != undefined)
	{
		var credentials = connection.credentials == undefined ? "" : JSON.stringify(connection.credentials);
		var sourceIndex = Statistics.Sources.ConnectToServer(connection.location, connection.port, connection.title ?? "", credentials);
	}

	here.private.UpdateRecentlyConnections(MenuResult.Id);
}]]>
					</body>
				</do-on>
			</object>
			<do access-modifier="private" name="GetMenuItems" display-name="GetMenuItems" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
				<body kind="javascript">
					<![CDATA[var items = [];

items.push({'id': "ConnectToServer", 'title': "Подключиться к серверу...", 'active': ConnectToServer.Enabled });
items.push({'id': "ConnectToSnapshot", 'title': "Подключиться к файлу...", 'active': ConnectToSnapshot.Enabled });

if (here.private.RecentlyConnections.Value != "")
{
	items.push({'title': "-" });
	var recentlyConnections = JSON.parse(here.private.RecentlyConnections.Value);
	for (var i = 0; i < recentlyConnections.length; i++)
	{
		var connection = recentlyConnections[i];		

		if (connection.filePath != undefined && connection.filePath != "")
		{
			var fileIsExist = Files.Exists(connection.filePath);
			items.push({ 'id': JSON.stringify(connection), 'title': connection.filePath, 'active': fileIsExist});
		}
		else if (connection.location != undefined && connection.port != undefined)
		{
			let title = connection.location + ":" + connection.port;
			if (connection.title != undefined && connection.title != "")
				title = connection.title +" - " + title;
			items.push({ 'id': JSON.stringify(connection), 'title': title });
		}
	}
	items.push({'title': "-" });
	items.push({'id': "clearList", 'title': "Очистить" });
}

return JSON.stringify(items);]]>
				</body>
			</do>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick" form-action="open-new" form-by-id="false">
				<object access-modifier="private" uuid="95f5e208-8c89-465f-9212-8be7cee5ce2d" base-type="Menu" base-type-id="07bb4545-980a-4140-bbaa-4d1397447864" ver="5">
					<init target="Items" ver="5">
						<expr>
							<![CDATA[GetMenuItems()]]>
						</expr>
					</init>
					<init target="pResult" ver="5" ref="MenuResult"/>
					<init target="pAction" ver="5" ref="MenuClick"/>
					<init target="PointHeight" ver="5" value="30"/>
					<init target="WindowX" ver="5">
						<expr>
							<![CDATA[btnConnect.ScreenX(0,0)]]>
						</expr>
					</init>
					<init target="WindowY" ver="5">
						<expr>
							<![CDATA[btnConnect.ScreenY(0, btnConnect.Height)]]>
						</expr>
					</init>
					<init target="pOnClosed" ver="5" ref="MenuClosed"/>
					<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
				</object>
			</do-on>
			<object access-modifier="private" name="MenuClosed" display-name="MenuClosed" uuid="0ed40417-8b2d-4e8d-b901-277497353750" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[btnConnect.Checked = false;
btnConnectExt.Checked = false;]]>
					</body>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="MouseClick">
				<body kind="om">
					<![CDATA[btnConnect.Checked = true;
btnConnectExt.Checked = true;]]>
				</body>
			</do-on>
			<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
		</object>
		<object access-modifier="private" name="separator_0" display-name="separator_0" uuid="29b870e6-7b00-4682-af56-2a6ce13747e8" base-type="ToolbarSeparator" base-type-id="0874ba53-66f8-4e74-b0d8-6e8f95558824" ver="5" description="" cardinal="1">
			<designed target="X" value="31" ver="5"/>
			<designed target="Y" value="6" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="8" ver="5"/>
			<designed target="Height" value="18" ver="5"/>
			<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
		</object>
		<object access-modifier="private" name="btnOpen" display-name="btnOpen" uuid="a7083561-964e-44a4-bacb-5fb95c9c367f" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="5" description="" cardinal="1">
			<designed target="X" value="40" ver="5"/>
			<designed target="Y" value="6" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<init target="IconFile" ver="5" value="Statistics_Icons/OpenFile24.png"/>
			<designed target="Tooltip" value="Открыть список параметров..." ver="5"/>
			<init target="pDropDown" ver="5" ref="btnOpenExt"/>
			<designed target="Width" value="18" ver="5"/>
			<designed target="Height" value="18" ver="5"/>
			<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="MouseClick">
				<body kind="om">
					<![CDATA[OpenParameterList.Invoke();]]>
				</body>
			</do-on>
			<do-trace access-modifier="private" target="Active" ver="5">
				<body>
					<![CDATA[OpenParameterList.Enabled]]>
				</body>
			</do-trace>
			<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
		</object>
		<object access-modifier="private" name="btnOpenExt" display-name="btnOpenExt" uuid="59ceeab0-6957-493f-a9fc-458405fb94b6" base-type="ToolbarDropDown" base-type-id="0e258e56-d922-4a8f-b8c3-7d577d177609" ver="5" description="" cardinal="1">
			<designed target="X" value="58" ver="5"/>
			<designed target="Y" value="6" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<init target="pButton" ver="5" ref="btnOpen"/>
			<object access-modifier="private" name="MenuResult" display-name="MenuResult" uuid="a8aaa5af-a71d-4ff4-8f32-47a3aebaf478" base-type="MenuResult" base-type-id="0fe7658c-92f4-4af7-b038-3594414ac651" ver="5" description="" cardinal="1"/>
			<object access-modifier="private" name="MenuClick" display-name="MenuClick" uuid="f1297e7c-efe0-4506-a789-cadedbde2103" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[if (MenuResult.Id == "clearList")
	here.private.RecentlyFiles = "";
else
{
	Statistics.OpenParameterList(MenuResult.Id);
	here.private.UpdateRecentlyFiles(MenuResult.Id);
}]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="MenuClosed" display-name="MenuClosed" uuid="427ad040-545d-4c68-8310-cedacf9d8940" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[btnOpen.Checked = false;
btnOpenExt.Checked = false;]]>
					</body>
				</do-on>
			</object>
			<do access-modifier="private" name="GetMenuItems" display-name="GetMenuItems" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
				<body kind="javascript">
					<![CDATA[var items = [];

var recentlyFiles = JSON.parse(here.private.RecentlyFiles);
for (var i = 0; i < recentlyFiles.length; i++)
{
	var filePath = recentlyFiles[i];
	var isFileExist = Files.Exists(filePath);
	items.push({ 'id': filePath, 'title': filePath, 'active': isFileExist });
}

items.push({'title': "-" });
items.push({'id': "clearList", 'title': "Очистить" });

return JSON.stringify(items);]]>
				</body>
			</do>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseClick" form-action="open-new" form-by-id="false">
				<object access-modifier="private" uuid="ba3d96a6-82b2-4e5d-9aaa-6f699355ae9f" base-type="Menu" base-type-id="07bb4545-980a-4140-bbaa-4d1397447864" ver="5">
					<init target="WindowX" ver="5">
						<expr>
							<![CDATA[btnOpen.ScreenX(0,0)]]>
						</expr>
					</init>
					<init target="WindowY" ver="5">
						<expr>
							<![CDATA[btnOpen.ScreenY(0, btnOpen.Height)]]>
						</expr>
					</init>
					<init target="Items" ver="5">
						<expr>
							<![CDATA[GetMenuItems()]]>
						</expr>
					</init>
					<init target="pResult" ver="5" ref="MenuResult"/>
					<init target="pAction" ver="5" ref="MenuClick"/>
					<init target="pOnClosed" ver="5" ref="MenuClosed"/>
					<designed target="X" value="0" ver="5"/>
					<designed target="Y" value="0" ver="5"/>
					<designed target="Rotation" value="0" ver="5"/>
					<designed target="Width" value="50" ver="5"/>
					<designed target="Height" value="50" ver="5"/>
					<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
				</object>
			</do-on>
			<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="MouseClick">
				<body kind="om">
					<![CDATA[btnOpen.Checked = true;
btnOpenExt.Checked = true;]]>
				</body>
			</do-on>
			<do-trace access-modifier="private" target="Active" ver="5">
				<body>
					<![CDATA[here.private.RecentlyFiles != ""]]>
				</body>
			</do-trace>
			<designed target="Width" value="11" ver="5"/>
			<designed target="Height" value="18" ver="5"/>
			<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
		</object>
		<object access-modifier="private" name="btnSave" display-name="btnSave" uuid="9fb581d5-69d0-4290-bc89-44294eba9184" base-type="ToolbarButton" base-type-id="06f54e9d-00fa-4fc7-81ad-fd37c305cbb1" ver="5" description="" cardinal="1">
			<designed target="X" value="71" ver="5"/>
			<designed target="Y" value="6" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<init target="IconFile" ver="5" value="Statistics_Icons/SaveFile24.png"/>
			<do-trace access-modifier="private" target="Active" ver="5">
				<body>
					<![CDATA[SaveParameterList.Enabled]]>
				</body>
			</do-trace>
			<designed target="Tooltip" value="Сохранить список параметров..." ver="5"/>
			<designed target="Width" value="18" ver="5"/>
			<designed target="Height" value="18" ver="5"/>
			<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="MouseClick">
				<body kind="om">
					<![CDATA[SaveParameterList.Invoke();]]>
				</body>
			</do-on>
			<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
		</object>
		<do-trace access-modifier="private" target="BrushColor" ver="5">
			<body>
				<![CDATA[Theme.BackgroundColor]]>
			</body>
		</do-trace>
		<object access-modifier="private" name="Layout" display-name="Layout" uuid="e7da72c7-0913-4181-be98-00dab32cea5b" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="5" description="" cardinal="1">
			<designed target="Orientation" value="1" ver="5"/>
			<designed target="Gap" value="0" ver="5"/>
		</object>
		<object access-modifier="private" name="separator_1" display-name="separator_1" uuid="12173d2e-4fe9-4c23-81e8-de8902bd2dff" base-type="ToolbarSeparator" base-type-id="0874ba53-66f8-4e74-b0d8-6e8f95558824" ver="5" description="" cardinal="1">
			<designed target="X" value="90" ver="5"/>
			<designed target="Y" value="6" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="8" ver="5"/>
			<designed target="Height" value="18" ver="5"/>
			<init target="init_Theme" ver="5" ref="Toolbar.private.theme"/>
		</object>
		<object access-modifier="private" name="Toolbar" display-name="Toolbar" uuid="66299129-5545-4dd5-9d05-42c90e9bb1cf" base-type="Statistics_Toolbar" base-type-id="3475A204-16EF-4C83-A2AF-51E30A2A6BEF" ver="5" description="" cardinal="1">
			<designed target="X" value="138" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="646" ver="5"/>
			<designed target="Height" value="30" ver="5"/>
			<init target="init_Theme" ver="5" ref="here.Theme"/>
			<init target="pStatistics" ver="5" ref="here.Statistics"/>
		</object>
		<designed target="Flip" value="0" ver="5"/>
		<object access-modifier="private" name="SizeLimits" display-name="SizeLimits" uuid="18883633-c34b-4954-a9bb-accf1731575e" base-type="LayoutSizeLimits" base-type-id="10342c1f-560b-4160-9de5-7e2c08026f47" ver="5" description="" cardinal="1">
			<designed target="MinWidth" value="0" ver="5"/>
			<designed target="MinHeight" value="30" ver="5"/>
			<designed target="MaxWidth" value="16777215" ver="5"/>
			<designed target="MaxHeight" value="30" ver="5"/>
		</object>
	</object>
	<object access-modifier="private" name="Statistics" display-name="Statistics" uuid="03209010-1624-4460-bd09-30bea9496483" base-type="Statistics" base-type-id="C11CEEB3-7A14-4701-AF6E-735749D45402" ver="5" description="" cardinal="1">
		<designed target="X" value="0" ver="5"/>
		<designed target="Y" value="30" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Width" value="800" ver="5"/>
		<designed target="Height" value="545" ver="5"/>
		<init target="init_SingleConnection" ver="5" value="false"/>
		<init target="init_Permissions" ver="5" ref="here.Permissions"/>
		<init target="init_ScreenKeyboard" ver="5" ref="here.ScreenKeyboard"/>
		<init target="init_Theme" ver="5" ref="here.Theme"/>
		<init target="init_Settings" ver="5" ref="here.Settings"/>
	</object>
	<object access-modifier="private" name="Statusbar" display-name="Statusbar" uuid="51133c16-88db-489b-b9aa-f302f631c50b" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5">
		<designed target="X" value="0" ver="5"/>
		<designed target="Y" value="575" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Width" value="800" ver="5"/>
		<designed target="Height" value="25" ver="5"/>
		<designed target="PenWidth" value="0" ver="5"/>
		<designed target="PenStyle" value="0" ver="5"/>
		<designed target="ZValue" value="0" ver="5"/>
		<designed target="Scale" value="1" ver="5"/>
		<designed target="Flip" value="0" ver="5"/>
		<designed target="Visible" value="true" ver="5"/>
		<designed target="Opacity" value="1" ver="5"/>
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="Tooltip" value="" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="0xff808080" ver="5"/>
		<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
		<designed target="BrushStyle" value="1" ver="5"/>
		<object access-modifier="private" name="SizeLimits" display-name="SizeLimits" uuid="0ce81d01-2d44-415c-a24f-2166aa898fe7" base-type="LayoutSizeLimits" base-type-id="10342c1f-560b-4160-9de5-7e2c08026f47" ver="5" description="" cardinal="1">
			<designed target="MinWidth" value="0" ver="5"/>
			<designed target="MinHeight" value="25" ver="5"/>
			<designed target="MaxWidth" value="16777215" ver="5"/>
			<designed target="MaxHeight" value="25" ver="5"/>
		</object>
		<do-trace access-modifier="private" target="BrushColor" ver="5">
			<body>
				<![CDATA[Theme.BackgroundColor]]>
			</body>
		</do-trace>
		<object access-modifier="private" name="LoginButton" display-name="LoginButton" uuid="d37fc5f6-6b27-4bc1-8fb1-4f15d50c4e95" base-type="LoginButton" base-type-id="d8d684bc-471f-4726-912c-02ba8a974892" base-const="true" ver="5" description="">
			<designed target="X" value="0" ver="5"/>
			<designed target="Y" value="0.5" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="25" ver="5"/>
			<designed target="Height" value="24" ver="5"/>
			<object access-modifier="private" name="SizeLimits" display-name="SizeLimits" uuid="289c18c4-8646-4c03-a7fd-9c30d512687b" base-type="LayoutSizeLimits" base-type-id="10342c1f-560b-4160-9de5-7e2c08026f47" ver="5" description="" cardinal="1">
				<designed target="MinWidth" value="0" ver="5"/>
				<designed target="MinHeight" value="0" ver="5"/>
				<designed target="MaxWidth" value="25" ver="5"/>
				<designed target="MaxHeight" value="24" ver="5"/>
			</object>
			<do-trace access-modifier="private" target="Visible" ver="5">
				<body>
					<![CDATA[Permissions.UseSecurity]]>
				</body>
			</do-trace>
		</object>
		<object access-modifier="private" name="Layout" display-name="Layout" uuid="a79d7185-3f91-4cb6-977c-a14b3678c3ad" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" base-const="true" ver="5" description="">
			<designed target="Orientation" value="1" ver="5"/>
			<designed target="Gap" value="0" ver="5"/>
		</object>
	</object>
	<do-on access-modifier="private" name="Handler_7" display-name="Handler_7" ver="5" event="CloseRequested">
		<body kind="om">
			<![CDATA[private.SaveSession();
Close();]]>
		</body>
	</do-on>
	<designed target="Flip" value="0" ver="5"/>
	<do-on access-modifier="private" name="Handler_8" display-name="Handler_8" ver="5" event="AboutToOpen">
		<body kind="om">
			<![CDATA[private.LoadSession();
private.LoadSettings();]]>
		</body>
	</do-on>
	<object access-modifier="private" name="Layout" display-name="Layout" uuid="2b2f524f-aa51-4716-97bd-d60815b757dd" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="5" description="" cardinal="1">
		<designed target="Orientation" value="2" ver="5"/>
		<designed target="Gap" value="0" ver="5"/>
	</object>
	<object access-modifier="private" name="ScreenKeyboard" display-name="ScreenKeyboard" uuid="cd8151f8-76be-4df9-a966-e47826e6fdb1" base-type="ScreenKeyboardOptions" base-type-id="0589bc8e-fbb2-4f0e-b5d2-f0d825538ef1" ver="5" description="" cardinal="1"/>
	<object access-modifier="private" name="Permissions" display-name="Permissions" uuid="ecc1d74e-29a8-432d-ba16-becf90944ebb" base-type="Statistics_Permissions" base-type-id="cb7a3e0d-75a2-404f-bf4c-763ec4f725c7" ver="5" description="" cardinal="1"/>
	<object access-modifier="private" name="Settings" display-name="Settings" uuid="26f67cfa-447b-45c6-a33a-623d163dd364" base-type="Statistics_Settings" base-type-id="a8c582fd-25fb-4cc3-8522-3166d1a63de6" base-const="true" ver="5" description=""/>
	<object access-modifier="private" name="ConnectToServer" display-name="ConnectToServer" uuid="1a974fcc-ab16-4fdc-9da0-95725d7c81e1" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="InvokeTrigger" value="false" ver="5"/>
		<object access-modifier="private" name="DialogResult" display-name="DialogResult" uuid="fa9a0acb-4408-44ea-846e-98c9fdf304d2" base-type="ConnectDialogResult" base-type-id="d594d8ef-50a0-48fe-8a09-acb33eda25ec" ver="5" description="" cardinal="1">
			<init target="Location" ver="5" value="127.0.0.1"/>
			<init target="Port" ver="5" value="4572"/>
		</object>
		<object access-modifier="private" name="OnComplete" display-name="OnComplete" uuid="d3f5593c-e321-4d0c-b238-7d90a9df89f8" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
				<body kind="javascript">
					<![CDATA[var sourceIndex = Statistics.Sources.ConnectToServer(DialogResult.Location, DialogResult.Port, DialogResult.Title, DialogResult.Credentials);
if (sourceIndex > -1)
{
	var connection = {
		'location': DialogResult.Location,
		'port': DialogResult.Port,
		'title': DialogResult.Title
	};

	if (DialogResult.Credentials != "")
		connection.credentials = JSON.parse(DialogResult.Credentials);

	private.UpdateRecentlyConnections(JSON.stringify(connection));
}]]>
				</body>
			</do-on>
		</object>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
			<object access-modifier="private" uuid="e65cef49-6e9a-48c9-82ca-4dd544b270c2" base-type="ConnectDialog" base-type-id="7ef11704-9e99-4515-a010-013b1fe1012f" ver="5">
				<init target="SpecifyTitle" ver="5" value="true"/>
				<init target="SpecifyHistoryPort" ver="5" value="false"/>
				<init target="OkAction" ver="5" ref="OnComplete"/>
				<init target="pResult" ver="5" ref="DialogResult"/>
				<designed target="WindowCaption" value="Подключиться к серверу" ver="5"/>
				<init target="init_ScreenKeyboard" ver="5" ref="ScreenKeyboard"/>
			</object>
		</do-on>
	</object>
	<object access-modifier="private" name="ConnectToSnapshot" display-name="ConnectToSnapshot" uuid="5ce580a3-04e2-4468-a7d2-1913aaf2cb8b" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="InvokeTrigger" value="false" ver="5"/>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
			<object access-modifier="private" uuid="c4274438-8bb9-45a5-9cce-7f92900cbd96" base-type="OpenFileDialog" base-type-id="41505bc5-e0a8-4d93-b1a9-de842aaf215b" ver="5">
				<init target="FileTypeFilter" ver="5" value="Файл статистики (*.jstat)|*.jstat|Файл статистики (*.stat)|*.stat"/>
				<designed target="WindowCaption" value="Подключиться к файлу" ver="5"/>
				<init target="Result" ver="5" ref="DialogResult"/>
				<init target="OnComplete" ver="5" ref="FileChoosen"/>
				<init target="init_Theme" ver="5" ref="here.Theme"/>
				<init target="init_ScreenKeyboard" ver="5" ref="here.ScreenKeyboard"/>
				<init target="ChangeFolderAllowed" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess]]>
					</expr>
				</init>
				<init target="CreateFolderAllowed" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess]]>
					</expr>
				</init>
				<init target="DefaultPath" ver="5">
					<expr>
						<![CDATA[Statistics.private.GetSnapshotFolderPath()]]>
					</expr>
				</init>
				<init target="RootPath" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess ? "" : Statistics.private.GetSnapshotFolderPath()]]>
					</expr>
				</init>
				<init target="DefaultFileType" ver="5" ref="FileType"/>
			</object>
		</do-on>
		<object access-modifier="private" name="FileType" display-name="FileType" uuid="62d93ffc-51a2-4de6-b712-9e66a1ca18fd" base-type="int4" base-type-id="74222947-f188-4195-8e0e-e33bd9827255" ver="5" description="" cardinal="1"/>
		<object access-modifier="private" name="DialogResult" display-name="DialogResult" uuid="23e68df9-79c2-4019-beef-e01e31a32e44" base-type="FileDialogResult" base-type-id="602926f1-7d01-4d50-a5c0-d8fd35eadc74" ver="5" description="" cardinal="1"/>
		<object access-modifier="private" name="FileChoosen" display-name="FileChoosen" uuid="f159f3dd-75cd-4e90-9dab-9ec04fefb6da" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
				<body kind="javascript">
					<![CDATA[Settings.SnapshotFolder = DialogResult.FolderPath;
FileType = DialogResult.FileType;

var sourceIndex = Statistics.Sources.ConnectToSnapshot(DialogResult.FilePath.Value);
if (sourceIndex > -1)
{
	var connection = {
		'filePath': DialogResult.FilePath.Value
	};

	private.UpdateRecentlyConnections(JSON.stringify(connection));
}]]>
				</body>
			</do-on>
		</object>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="Invoked">
			<body kind="om">
				<![CDATA[Files.CreateRecursiveFolder(Statistics.private.GetSnapshotFolderPath());]]>
			</body>
		</do-on>
	</object>
	<object access-modifier="private" name="SaveParameterList" display-name="SaveParameterList" uuid="6c2ec090-3b65-4518-97e1-55c85c47acfb" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="InvokeTrigger" value="false" ver="5"/>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
			<object access-modifier="private" uuid="c0763783-e1a6-4ece-b31b-2f43f849384f" base-type="SaveFileDialog" base-type-id="d69a91c3-89e9-4e7b-994e-9242dbc5e095" ver="5">
				<init target="FileTypeFilter" ver="5" value="Список параметров (*.spl)|*.spl"/>
				<designed target="WindowCaption" value="Сохранить список параметров" ver="5"/>
				<init target="Result" ver="5" ref="DialogResult"/>
				<init target="OnComplete" ver="5" ref="FileChoosen"/>
				<init target="init_Theme" ver="5" ref="here.Theme"/>
				<init target="init_ScreenKeyboard" ver="5" ref="here.ScreenKeyboard"/>
				<init target="ChangeFolderAllowed" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess]]>
					</expr>
				</init>
				<init target="CreateFolderAllowed" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess]]>
					</expr>
				</init>
				<init target="RootPath" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess ? "" : here.private.GetParameterListFolder()]]>
					</expr>
				</init>
				<init target="DefaultPath" ver="5">
					<expr>
						<![CDATA[here.private.GetParameterListFolder()]]>
					</expr>
				</init>
			</object>
		</do-on>
		<object access-modifier="private" name="DialogResult" display-name="DialogResult" uuid="0617fc47-a909-45b4-8444-0031b93c8aa6" base-type="FileDialogResult" base-type-id="602926f1-7d01-4d50-a5c0-d8fd35eadc74" ver="5" description="" cardinal="1"/>
		<object access-modifier="private" name="FileChoosen" display-name="FileChoosen" uuid="c31fc3d5-ddbf-44ef-b768-1b7fc6c4a545" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
				<body kind="om">
					<![CDATA[Statistics.SaveParameterList(DialogResult.FilePath);
Settings.ParameterListFolder = DialogResult.FolderPath;

if (Files.Exists(DialogResult.FilePath))
{
	private.ShowInfo.title = "Сохранить список параметров";
	private.ShowInfo.message = "Список параметров сохранен в файл:\n" + DialogResult.FilePath;
	private.ShowInfo.Invoke();
}]]>
				</body>
			</do-on>
		</object>
		<do-trace access-modifier="private" target="Enabled" ver="5">
			<body>
				<![CDATA[Statistics.Table.Model.RowCount > 0]]>
			</body>
		</do-trace>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="Invoked">
			<body kind="om">
				<![CDATA[Files.CreateRecursiveFolder(private.GetParameterListFolder());]]>
			</body>
		</do-on>
	</object>
	<object access-modifier="private" name="OpenParameterList" display-name="OpenParameterList" uuid="4103a4f0-c5a7-47b2-b3cb-a9c44a03c759" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="InvokeTrigger" value="false" ver="5"/>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
			<object access-modifier="private" uuid="49f262b3-bf2a-40b9-95d5-cf0705d468a4" base-type="OpenFileDialog" base-type-id="41505bc5-e0a8-4d93-b1a9-de842aaf215b" ver="5">
				<init target="FileTypeFilter" ver="5" value="Список параметров (*.spl)|*.spl"/>
				<designed target="WindowCaption" value="Открыть список параметров" ver="5"/>
				<init target="Result" ver="5" ref="DialogResult"/>
				<init target="OnComplete" ver="5" ref="FileChoosen"/>
				<init target="init_Theme" ver="5" ref="here.Theme"/>
				<init target="init_ScreenKeyboard" ver="5" ref="here.ScreenKeyboard"/>
				<init target="ChangeFolderAllowed" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess]]>
					</expr>
				</init>
				<init target="CreateFolderAllowed" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess]]>
					</expr>
				</init>
				<init target="DefaultPath" ver="5">
					<expr>
						<![CDATA[here.private.GetParameterListFolder()]]>
					</expr>
				</init>
				<init target="RootPath" ver="5">
					<expr>
						<![CDATA[here.Permissions.FileSystemAccess ? "" : here.private.GetParameterListFolder()]]>
					</expr>
				</init>
			</object>
		</do-on>
		<object access-modifier="private" name="DialogResult" display-name="DialogResult" uuid="6a8a0c8b-0e0a-42ea-b496-c243f31cfcb4" base-type="FileDialogResult" base-type-id="602926f1-7d01-4d50-a5c0-d8fd35eadc74" ver="5" description="" cardinal="1"/>
		<object access-modifier="private" name="FileChoosen" display-name="FileChoosen" uuid="92653a32-a955-4acd-ae0e-537783ff4ea4" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
				<body kind="om">
					<![CDATA[Statistics.OpenParameterList(DialogResult.FilePath);
Settings.ParameterListFolder = DialogResult.FolderPath;

private.UpdateRecentlyFiles(DialogResult.FilePath);]]>
				</body>
			</do-on>
		</object>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="Invoked">
			<body kind="om">
				<![CDATA[Files.CreateRecursiveFolder(private.GetParameterListFolder());]]>
			</body>
		</do-on>
	</object>
	<do-on access-modifier="private" name="Handler_9" display-name="Handler_9" ver="5" event="Closed">
		<body kind="om">
			<![CDATA[private.SaveSettings();]]>
		</body>
	</do-on>
</type>

