<type access-modifier="private" name="RoleEdit" display-name="RoleEdit" uuid="01b30c26-46d0-40e6-a364-8a9800f122a0" base-type="Form" base-type-id="ffaf5544-6200-45f4-87ec-9dd24558a9d5" ver="5">
	<designed target="X" value="0" ver="5"/>
	<designed target="Y" value="0" ver="5"/>
	<designed target="ZValue" value="0" ver="5"/>
	<designed target="Rotation" value="0" ver="5"/>
	<designed target="Scale" value="1" ver="5"/>
	<designed target="Visible" value="true" ver="5"/>
	<designed target="Opacity" value="1" ver="5"/>
	<designed target="Enabled" value="true" ver="5"/>
	<designed target="Tooltip" value="" ver="5"/>
	<designed target="Width" value="847" ver="5"/>
	<designed target="Height" value="400" ver="5"/>
	<designed target="PenColor" value="4278190080" ver="5"/>
	<designed target="PenStyle" value="0" ver="5"/>
	<designed target="PenWidth" value="1" ver="5"/>
	<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
	<designed target="BrushStyle" value="1" ver="5"/>
	<designed target="WindowX" value="0" ver="5"/>
	<designed target="WindowY" value="0" ver="5"/>
	<designed target="WindowWidth" value="847" ver="5"/>
	<designed target="WindowHeight" value="400" ver="5"/>
	<designed target="WindowCaption" value="MainForm" ver="5"/>
	<designed target="ShowWindowCaption" value="true" ver="5"/>
	<designed target="ShowWindowMinimize" value="true" ver="5"/>
	<designed target="ShowWindowMaximize" value="true" ver="5"/>
	<designed target="ShowWindowClose" value="true" ver="5"/>
	<designed target="AlwaysOnTop" value="false" ver="5"/>
	<designed target="WindowSizeMode" value="0" ver="5"/>
	<designed target="WindowBorderStyle" value="1" ver="5"/>
	<designed target="WindowState" value="0" ver="5"/>
	<designed target="WindowScalingMode" value="0" ver="5"/>
	<designed target="MonitorNumber" value="0" ver="5"/>
	<designed target="WindowPosition" value="2" ver="5"/>
	<designed target="WindowCloseMode" value="0" ver="5"/>
	<object access-modifier="private" name="private" display-name="private" uuid="c2fa7987-6771-44b1-b717-5a655538da69" base-type="" base-type-id="00000000-0000-0000-0000-000000000000" ver="5">
		<object access-modifier="private" name="pTheme" display-name="pTheme" uuid="b158af4e-cf90-464e-b99c-f019bfef2b3f" base-type="Theme" base-type-id="05d4d7df-0f8e-4ec1-ac85-b5460e30af81" base-const="true" base-ref="true" ver="5" description=""/>
		<object access-modifier="private" name="pScreenKeyboard" display-name="pScreenKeyboard" uuid="c25a6349-5956-4260-b555-6ec09cab5c66" base-type="ScreenKeyboardOptions" base-type-id="0589bc8e-fbb2-4f0e-b5d2-f0d825538ef1" base-const="true" base-ref="true" ver="5" description=""/>
		<object access-modifier="private" name="SelectedRoleData" display-name="SelectedRoleData" uuid="ca3f4930-6a15-45f4-8b81-2ed47c40f843" base-type="" base-type-id="00000000-0000-0000-0000-000000000000" ver="5">
			<object access-modifier="private" name="Id" display-name="Id" uuid="8756eadb-7627-4b43-aa5d-8c33a67caca3" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="5" description="" cardinal="1">
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
					<body kind="om">
						<![CDATA[//Обновить состояние команд
commandsExecuteAbility : bool = (value != "");
Commands.DoEdit.CanExecute = commandsExecuteAbility;
Commands.DoRemoveSelected.CanExecute = commandsExecuteAbility;
Commands.DoAddRights.CanExecute = commandsExecuteAbility;]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="Name" display-name="Name" uuid="a8709d10-036b-4b4e-8af4-17034b1768fc" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5" description="" cardinal="1"/>
			<object access-modifier="private" name="RightsList" display-name="RightsList" uuid="300afa76-960c-45d5-855d-1cf05f8e037e" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="5" description="" cardinal="1">
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
					<body kind="om">
						<![CDATA[Commands.DoDeleteRights.CanExecute = (Id != "" && value != "");]]>
					</body>
				</do-on>
			</object>
			<do access-modifier="private" name="Reset" display-name="Reset" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
				<body kind="om">
					<![CDATA[Id = "";
Name = "";
RightsList = "";]]>
				</body>
			</do>
		</object>
		<object access-modifier="private" name="SaveChanges" display-name="SaveChanges" uuid="f11050f4-90da-41c9-b5f8-5209642495b1" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value)
{
	SystemCommands.DoSave = false;
	Application.Save();
	SystemCommands.GoTo.doBlockingControll();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="needSave" display-name="needSave" uuid="18080dbe-7c1f-47d6-b378-df79bed6e271" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5">
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
					<body kind="om">
						<![CDATA[SystemCommands.DoSave.CanExecute = value && Application.IsChanged;]]>
					</body>
				</do-on>
			</object>
		</object>
		<object access-modifier="private" name="CreateRole" display-name="CreateRole" uuid="9ca541b2-50e5-47eb-bdcb-712d7d336d79" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5">
			<object access-modifier="private" name="ShowCreateRoleWindow" display-name="ShowCreateRoleWindow" uuid="f819dd7b-322b-43fd-8444-21e3a58853eb" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="d34823a5-f32f-4f0e-98cd-e833d06d7099" base-type="InputDialog" base-type-id="eb80f6e6-d9d7-4ca5-a3e9-34863ab130d2" ver="5">
						<init target="Result" ver="5" ref="RoleName"/>
						<init target="OkAction" ver="5" ref="OnComplete"/>
						<designed target="WindowCaption" value="Введите имя роли" ver="5"/>
						<designed target="WindowIconPath" value="Security_Icons/RoleAdd16.png" ver="5"/>
						<init target="init_ScreenKeyboard" ver="5" ref="pScreenKeyboard"/>
						<init target="init_Theme" ver="5" ref="pTheme"/>
					</object>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value)
{
	Commands.DoCreate = false;

	RoleName.ClearData();
	WorkPanel.RoleView.SetSelectedRows("[]");
	ShowCreateRoleWindow.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="OnComplete" display-name="OnComplete" uuid="14a639ad-8f22-40bb-a914-88001b48e204" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[if (RoleName.Error == "" && Commands.DoCreate.CanExecute)
{
	Commands.DoCreate.CanExecute = false;
	
	newName: string = RoleName.Value;
	
	//добавить роль
	Application.CreateRole(newName, Application.ApplicationID);
	
	//обновить список ролей
	LoadRolesList();
	
	//выделить добавленную роль
	for (row: int4 = 0; row < WorkPanel.RoleView.GetRowCount(); row += 1)
	{
		currentRoleName: string = WorkPanel.RoleView.GetCellData(row, 1);
		if (currentRoleName == newName)
		{
			WorkPanel.RoleView.SetCurrentCell(row, 1);
			break;
		}
	}

	//обновить состояние команд
	Commands.DoCreate.CanExecute = true;
	SaveChanges.needSave = true;
}]]>
					</body>
				</do-on>
			</object>
		</object>
		<object access-modifier="private" name="DeleteRole" display-name="DeleteRole" uuid="7b455fd3-002a-4632-9516-9bd5504b4872" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value)
{
	Commands.DoRemoveSelected = false;
	ShowRemoveDialog.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="ShowRemoveDialog" display-name="ShowRemoveDialog" uuid="0a4ec015-40e5-4c55-8542-58dbf74f2098" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="58436062-27ac-4ccb-b847-a6f7d11b0c50" base-type="MessageDialog" base-type-id="a468f863-f603-4768-ad4b-e16bc34ea78e" ver="5">
						<init target="Icon" ver="5" value="1"/>
						<init target="Buttons" ver="5" value="1"/>
						<designed target="WindowCaption" value="Удалить роль" ver="5"/>
						<init target="OkAction" ver="5" ref="OnComplete"/>
						<init target="Message" ver="5">
							<expr>
								<![CDATA["Вы действительно хотите удалить выбранную роль ?"]]>
							</expr>
						</init>
						<init target="pTheme" ver="5" ref="here.private.pTheme"/>
					</object>
				</do-on>
			</object>
			<object access-modifier="private" name="OnComplete" display-name="OnComplete" uuid="01d194c5-6cf2-4c5d-ad2b-9bc79d427f65" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[Application.DeleteRole(SelectedRoleData.Id);
LoadRolesList();

private.SaveChanges.needSave = true;
WorkPanel.RoleView.SetSelectedRows("[]");]]>
					</body>
				</do-on>
			</object>
		</object>
		<object access-modifier="private" name="ChangeName" display-name="ChangeName" uuid="e88be227-279c-43b9-82cf-7ecc62666f8c" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5">
			<object access-modifier="private" name="ShowChangeNameWindow" display-name="ShowChangeNameWindow" uuid="a75246da-fee1-4438-93b0-a702ade97574" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="57a21218-d370-4200-b978-983365f24398" base-type="InputDialog" base-type-id="eb80f6e6-d9d7-4ca5-a3e9-34863ab130d2" ver="5">
						<designed target="WindowCaption" value="Введите имя роли" ver="5"/>
						<init target="Result" ver="5" ref="RoleName"/>
						<init target="OkAction" ver="5" ref="OnComplete"/>
						<designed target="WindowIconPath" value="Security_Icons/RoleRename16.png" ver="5"/>
						<init target="init_ScreenKeyboard" ver="5" ref="pScreenKeyboard"/>
						<init target="init_Theme" ver="5" ref="pTheme"/>
					</object>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value)
{
	Commands.DoEdit = false;

	RoleName.ClearData();
	RoleName.InputText = SelectedRoleData.Name;
	ShowChangeNameWindow.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="OnComplete" display-name="OnComplete" uuid="8959148b-8e2d-4bfb-813d-12ba87810a40" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[if (RoleName.Error == "")
{
	SaveChanges.needSave = true;
	
	Application.ChangeRole(SelectedRoleData.Id, RoleName.Value);
	LoadRolesList();
}]]>
					</body>
				</do-on>
			</object>
		</object>
		<do-trace access-modifier="private" target="CreateRole" ver="5">
			<body>
				<![CDATA[Commands.DoCreate]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="DeleteRole" ver="5">
			<body>
				<![CDATA[Commands.DoRemoveSelected]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="ChangeName" ver="5">
			<body>
				<![CDATA[Commands.DoEdit]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="SaveChanges" ver="5">
			<body>
				<![CDATA[SystemCommands.DoSave]]>
			</body>
		</do-trace>
		<object access-modifier="private" name="AddRigths" display-name="AddRigths" uuid="be975978-49ca-43ea-bb77-e36007e9c54b" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5">
			<object access-modifier="private" name="ShowSetChangeRightsDialog" display-name="ShowSetChangeRightsDialog" uuid="5fcaffa2-e641-46e0-84c0-66e1f8061a04" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="8c4749ef-c4b7-46cc-b16c-abb82d7bb1a5" base-type="ChangeRights" base-type-id="24f489ad-7aec-41a5-b0f7-8ed917e6f052" ver="5">
						<init target="pApplyChanges" ver="5" ref="OnAdd"/>
						<init target="CurrentApp" ver="5" ref="Application.ApplicationID"/>
						<init target="CurrentRights" ver="5" ref="SelectedRoleData.RightsList"/>
						<init target="DeleteMode" ver="5" value="false"/>
						<init target="Init_Theme" ver="5" ref="here.private.pTheme"/>
						<init target="pResult" ver="5" ref="RightsDialogResult"/>
					</object>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value)
{
	Commands.DoAddRights = false;
	
	ShowSetChangeRightsDialog.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="OnAdd" display-name="OnAdd" uuid="3850538a-867b-4647-9644-d7d580d7663a" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="javascript">
						<![CDATA[if (RightsDialogResult.Value == "")
	return;
	
try
{
	var rightsList = JSON.parse(RightsDialogResult.Value);
}
catch (error)
{
	return;
}

const addRightToRole = Application.RoleAddRight;

const appName = Application.ApplicationID;
const roleId = SelectedRoleData.Id;

//добавить выбранные права
for (let right of rightsList)
{
	let type = right.Type;
	let name = right.TokenName;
	let allowValue = right.TokenValueAllow;
	let denyValue = right.TokenValueDeny;
	addRightToRole(appName, roleId, name, type, allowValue, denyValue);	
}

//сохранение изменений
SaveChanges.needSave = true;

//очистить поле обмена
RightsDialogResult.Value = "";

//обновить список прав
UpdateRightsInTable();]]>
					</body>
				</do-on>
			</object>
		</object>
		<object access-modifier="private" name="DeleteRigths" display-name="DeleteRigths" uuid="8d89bd5d-4fe2-4b7b-ab22-5500702aa732" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="5">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value)
{
	Commands.DoDeleteRights = false;

	ShowSetChangeRightsDialog.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="ShowSetChangeRightsDialog" display-name="ShowSetChangeRightsDialog" uuid="fe0f5d6b-5289-48a8-9843-0096174a70f9" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="6454fe48-67c3-4bd6-afd9-e5943cff4808" base-type="ChangeRights" base-type-id="24f489ad-7aec-41a5-b0f7-8ed917e6f052" ver="5">
						<init target="pApplyChanges" ver="5" ref="OnDelete"/>
						<init target="CurrentRights" ver="5" ref="SelectedRoleData.RightsList"/>
						<init target="DeleteMode" ver="5" value="true"/>
						<init target="Init_Theme" ver="5" ref="here.private.pTheme"/>
						<init target="pResult" ver="5" ref="RightsDialogResult"/>
					</object>
				</do-on>
			</object>
			<object access-modifier="private" name="OnDelete" display-name="OnDelete" uuid="701d6f4d-fb83-42ae-af4f-c95b090f43f2" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="javascript">
						<![CDATA[if (RightsDialogResult.Value == "")
	return;
	
try
{
	var rightsList = JSON.parse(RightsDialogResult.Value);
}
catch (error)
{
	return;
}

const deleteRightToRole = Application.RoleDeleteRight;

const appName = Application.ApplicationID;
const roleId = SelectedRoleData.Id;

//удалить выбранные права
for (let right of rightsList)
	deleteRightToRole(appName, roleId, right.TokenName);

//сохранение изменений
SaveChanges.needSave = true;

//очистить поле обмена
RightsDialogResult.Value = "";

//обновить список прав
UpdateRightsInTable();]]>
					</body>
				</do-on>
			</object>
		</object>
		<object access-modifier="private" name="RightsDialogResult" display-name="RightsDialogResult" uuid="4bfc0b8b-8db1-4da0-9ee5-341253ef7050" base-type="EditDialogResult" base-type-id="ce8af278-7358-4aa7-897d-e37d5d49460e" ver="5" description="" cardinal="1"/>
		<object access-modifier="private" name="RoleName" display-name="RoleName" uuid="51bc0a2d-10bf-4789-810b-e1f33c3282e2" base-type="InputDialogResult" base-type-id="cdcda119-652b-45ed-bfc4-8cc21b98730d" ver="5">
			<object access-modifier="private" name="IsChanged" display-name="IsChanged" uuid="541a3f93-4f90-4914-be90-7d671653e840" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="5">
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
					<body kind="javascript">
						<![CDATA[const errorText = RoleName.Error;
const currentRoleName = SelectedRoleData.Name;
const rolesModel = WorkPanel.RoleView.Model;

var verifiableName = InputText.Value.trim().toLowerCase();

errorText.Value = "";

if (verifiableName != "")
{
	//если имя роли не изменилось
	if (currentRoleName.toLowerCase() == verifiableName)
		return;

	let rolesList = JSON.parse(Application.GetRolesList()).data;
	
	//если ролей нет
	if (rolesList.length == 0)
		return;
		
	//поиск повторяющихся имен
	let nameList = rolesList.map((role) => role.roleName.toLowerCase());
	if (nameList.includes(verifiableName))
		errorText.Value = "Повторяющиеся имена недопустимы";
}			
else
{
	errorText.Value = "Имя роли не может быть пустым";
}]]>
					</body>
				</do-on>
			</object>
			<do-trace access-modifier="private" target="IsChanged" ver="5">
				<body>
					<![CDATA[InputText]]>
				</body>
			</do-trace>
			<do access-modifier="private" name="ClearData" display-name="ClearData" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
				<body kind="om">
					<![CDATA[RoleName.InputText = "";
RoleName.Error = "";
RoleName.Value ="";]]>
				</body>
			</do>
		</object>
		<do access-modifier="private" name="LoadRolesList" display-name="LoadRolesList" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[const rolesModel = WorkPanel.RoleView.TableModel;

WorkPanel.RoleView.Init();
rolesModel.Clear();

var rolesList = JSON.parse(Application.GetRolesList()).data;

if (rolesList.length == 0)
	return;

//Заполнение модели
rolesModel.InsertRows(0, rolesList.length);
for (let [row, role] of rolesList.entries())
{
	let rowData = [role.roleID, role.roleName];
	rolesModel.SetRowDataAsJson(row, JSON.stringify(rowData));
}]]>
			</body>
		</do>
		<do access-modifier="private" name="UpdateRightsInTable" display-name="UpdateRightsInTable" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[//подготовка списка прав для отображения
const roleId = SelectedRoleData.Id;

var roleRightsList = JSON.parse(Application.GetRoleRights(roleId)).data;

var rightsEntry = {"Rights": roleRightsList, "EffectiveRights": roleRightsList};

//сохранить список назначенных прав в поле
SelectedRoleData.RightsList = (roleRightsList.length > 0) ? (JSON.stringify(roleRightsList)) : ("");

//загрузка прав в таблицу
WorkPanel.RightsTable.ShowRights(JSON.stringify(rightsEntry));]]>
			</body>
		</do>
		<do access-modifier="private" name="SaveViewSettings" display-name="SaveViewSettings" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="om">
				<![CDATA[SystemCommands.ViewSettings.Update(SystemCommands.Forms.RoleEditor, GetViewSettings());]]>
			</body>
		</do>
		<init target="pTheme" ver="5" ref="init_Theme"/>
		<init target="pScreenKeyboard" ver="5" ref="init_ScreenKeyboard"/>
		<do-trace access-modifier="private" target="AddRigths" ver="5">
			<body>
				<![CDATA[Commands.DoAddRights]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="DeleteRigths" ver="5">
			<body>
				<![CDATA[Commands.DoDeleteRights]]>
			</body>
		</do-trace>
		<object access-modifier="private" name="ShowError" display-name="ShowError" uuid="f753a880-32eb-4bbe-9a2a-edb3624c8173" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="InvokeTrigger" value="false" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
				<object access-modifier="private" uuid="223bca99-7570-4708-99ed-c2a06134fdd2" base-type="MessageDialog" base-type-id="a468f863-f603-4768-ad4b-e16bc34ea78e" ver="5">
					<init target="Message" ver="5" ref="message"/>
					<init target="Buttons" ver="5" value="0"/>
					<init target="Icon" ver="5" value="3"/>
					<designed target="WindowCaption" value="Ошибка" ver="5"/>
					<init target="pTheme" ver="5" ref="here.private.pTheme"/>
				</object>
			</do-on>
			<object access-modifier="private" name="message" display-name="message" uuid="07c4ea13-1dd0-486f-b208-307f821cbe98" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5"/>
		</object>
	</object>
	<object access-modifier="private" name="Debug" display-name="Debug" uuid="954e1ab1-eebd-4f20-a0ae-e0e476a2ddb1" base-type="DebugTool" base-type-id="43946044-139a-43f4-a7b8-19a6074ffc56" ver="5"/>
	<object access-modifier="private" name="Application" display-name="Application" uuid="56d5f2c4-6b8e-4526-b7aa-f0a9bceb78d8" base-type="SecurityManagerApplication" base-type-id="cfc3985c-54fc-4fe4-b001-cade048d6ee0" ver="5">
		<designed target="ApplicationName" value="" ver="5"/>
		<init target="SecurityManager" ver="5">
			<object access-modifier="private" uuid="b0c06c01-d429-4e26-a526-caf2e7df06b8" base-type="SecurityManager" base-type-id="179958e0-f45a-40f3-9668-98e4ea2987da" ver="5">
				<init target="SecurityContext" ver="5">
					<object access-modifier="private" uuid="30f1fe7f-2e62-4f6b-8abb-0191f58ed57a" base-type="SecurityContext" base-type-id="d9cb0fff-b70a-4e2d-833d-3f73cf74e0dd" ver="5"/>
				</init>
			</object>
		</init>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="LoadComplete">
			<body kind="om">
				<![CDATA[Title.AppNameText = ApplicationName;
private.LoadRolesList();

Commands.DoCreate.CanExecute = true;
SystemCommands.GoTo.doUnblockingControll();]]>
			</body>
		</do-on>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="SaveComplete">
			<body kind="om">
				<![CDATA[private.SaveChanges.needSave = false;
SystemCommands.GoTo = SystemCommands.GoTo.frameCode != SystemCommands.Forms.RoleEditor;
SystemCommands.GoTo.doUnblockingControll();]]>
			</body>
		</do-on>
		<do-on access-modifier="private" name="Handler_3" display-name="Handler_3" ver="5" event="SaveFailed">
			<body kind="om">
				<![CDATA[private.ShowError.message = GetErrorDescriptionByCode(FailReasonCode);
private.ShowError.Invoke();
SystemCommands.GoTo.doUnblockingControll();]]>
			</body>
		</do-on>
		<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="5" event="LoadFailed">
			<body kind="om">
				<![CDATA[SystemCommands.GoTo.doUnblockingControll();
private.ShowError.message = GetErrorDescriptionByCode(FailReasonCode);
private.ShowError.Invoke();
SystemCommands.GoTo.doUnblockingControll();]]>
			</body>
		</do-on>
	</object>
	<object access-modifier="private" name="Title" display-name="Title" uuid="323f4c00-644b-4d75-8a97-33e5dec35687" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5">
		<designed target="X" value="0" ver="5"/>
		<designed target="Y" value="0" ver="5"/>
		<designed target="ZValue" value="0" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Scale" value="1" ver="5"/>
		<designed target="Visible" value="true" ver="5"/>
		<designed target="Opacity" value="1" ver="5"/>
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="Tooltip" value="" ver="5"/>
		<designed target="Width" value="847" ver="5"/>
		<designed target="Height" value="22" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="0xff000000" ver="5"/>
		<designed target="PenStyle" value="0" ver="5"/>
		<designed target="PenWidth" value="1" ver="5"/>
		<designed target="BrushColor" value="0xfff0f0f0" ver="5"/>
		<designed target="BrushStyle" value="0" ver="5"/>
		<object access-modifier="private" name="Icon" display-name="Icon" uuid="b3ae5109-576a-466e-8c40-155a237c9c2b" base-type="Image" base-type-id="5a6b2782-c728-4a42-8c02-1a83ef97e138" ver="5">
			<designed target="X" value="2" ver="5"/>
			<designed target="Y" value="7" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="16" ver="5"/>
			<designed target="Height" value="16" ver="5"/>
			<designed target="PenColor" value="4278190080" ver="5"/>
			<designed target="PenStyle" value="0" ver="5"/>
			<designed target="PenWidth" value="1" ver="5"/>
			<designed target="ImageFile" value="Security_Icons/Application16.png" ver="5"/>
			<designed target="Active" value="true" ver="5"/>
			<designed target="CurrentFrameNumber" value="0" ver="5"/>
			<designed target="Speed" value="1" ver="5"/>
			<object access-modifier="private" name="Margins" display-name="Margins" uuid="e7977459-6046-4ebd-a918-90966b1eaedc" base-type="LayoutMargins" base-type-id="d86ce751-1ea7-42c6-8d4b-10c651a2727d" ver="5" description="" cardinal="1">
				<designed target="Top" value="1" ver="5"/>
				<designed target="Bottom" value="1" ver="5"/>
				<designed target="Left" value="2" ver="5"/>
				<designed target="Right" value="1" ver="5"/>
			</object>
			<object access-modifier="private" name="SizeLimits" display-name="SizeLimits" uuid="455b6c47-37ff-49aa-992d-d657b8a436b1" base-type="LayoutSizeLimits" base-type-id="10342c1f-560b-4160-9de5-7e2c08026f47" ver="5" description="" cardinal="1">
				<designed target="MinWidth" value="0" ver="5"/>
				<designed target="MinHeight" value="0" ver="5"/>
				<designed target="MaxWidth" value="16" ver="5"/>
				<designed target="MaxHeight" value="16" ver="5"/>
			</object>
			<designed target="Flip" value="0" ver="5"/>
		</object>
		<object access-modifier="private" name="AppNameText" display-name="AppNameText" uuid="130f06a1-5433-4dfa-b117-d027687ce3ae" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="5">
			<designed target="X" value="24" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="ZValue" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Opacity" value="1" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Tooltip" value="" ver="5"/>
			<designed target="Width" value="823" ver="5"/>
			<designed target="Height" value="22" ver="5"/>
			<designed target="Text" value="Приложение" ver="5"/>
			<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
			<designed target="FontColor" value="0xff000000" ver="5"/>
			<designed target="TextAlignment" value="129" ver="5"/>
			<init target="Text" ver="5" value=""/>
			<designed target="Flip" value="0" ver="5"/>
			<object access-modifier="private" name="Margins" display-name="Margins" uuid="7761a0e4-4104-4fc7-b97a-5650cb24186d" base-type="LayoutMargins" base-type-id="d86ce751-1ea7-42c6-8d4b-10c651a2727d" ver="5" description="" cardinal="1">
				<designed target="Top" value="0" ver="5"/>
				<designed target="Bottom" value="0" ver="5"/>
				<designed target="Left" value="5" ver="5"/>
				<designed target="Right" value="0" ver="5"/>
			</object>
			<do-trace access-modifier="private" target="FontColor" ver="5">
				<body>
					<![CDATA[private.pTheme.ForegroundColor]]>
				</body>
			</do-trace>
		</object>
		<object access-modifier="private" name="LinearLayout" display-name="LinearLayout" uuid="7deee29d-0065-4e5f-9adc-8959818e92f5" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="5">
			<designed target="Orientation" value="1" ver="5"/>
			<designed target="Gap" value="0" ver="5"/>
		</object>
		<object access-modifier="private" name="SizeLimits" display-name="SizeLimits" uuid="45d9c1fd-bb36-4fef-9a15-1c3f56bbacc6" base-type="LayoutSizeLimits" base-type-id="10342c1f-560b-4160-9de5-7e2c08026f47" ver="5" description="" cardinal="1">
			<designed target="MinWidth" value="0" ver="5"/>
			<designed target="MinHeight" value="22" ver="5"/>
			<designed target="MaxWidth" value="16777215" ver="5"/>
			<designed target="MaxHeight" value="22" ver="5"/>
		</object>
		<designed target="Flip" value="0" ver="5"/>
	</object>
	<object access-modifier="private" name="WorkPanel" display-name="WorkPanel" uuid="b86718bc-b0d5-40cc-9434-365c50201758" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="5" description="" cardinal="1">
		<designed target="X" value="0" ver="5"/>
		<designed target="Y" value="30" ver="5"/>
		<designed target="ZValue" value="0" ver="5"/>
		<designed target="Rotation" value="0" ver="5"/>
		<designed target="Scale" value="1" ver="5"/>
		<designed target="Visible" value="true" ver="5"/>
		<designed target="Opacity" value="1" ver="5"/>
		<designed target="Enabled" value="true" ver="5"/>
		<designed target="Tooltip" value="" ver="5"/>
		<designed target="Width" value="847" ver="5"/>
		<designed target="Height" value="370" ver="5"/>
		<designed target="RoundingRadius" value="0" ver="5"/>
		<designed target="PenColor" value="4278190080" ver="5"/>
		<designed target="PenStyle" value="0" ver="5"/>
		<designed target="PenWidth" value="1" ver="5"/>
		<designed target="BrushColor" value="4278190080" ver="5"/>
		<designed target="BrushStyle" value="0" ver="5"/>
		<object access-modifier="private" name="RoleView" display-name="RoleView" uuid="3b3cdedf-caf3-48fc-be95-01b3a52e979c" base-type="Table" base-type-id="c65ff4dc-f22b-47d3-9333-72c4e4e5f662" ver="5">
			<designed target="X" value="0" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Scale" value="1" ver="5"/>
			<designed target="Visible" value="true" ver="5"/>
			<designed target="Enabled" value="true" ver="5"/>
			<designed target="Width" value="220" ver="5"/>
			<designed target="Height" value="370" ver="5"/>
			<designed target="HeaderHeight" value="25" ver="5"/>
			<designed target="HeaderVisible" value="true" ver="5"/>
			<designed target="RowHeight" value="25" ver="5"/>
			<designed target="RowOrder" value="0" ver="5"/>
			<designed target="SelectionBehavior" value="1" ver="5"/>
			<designed target="SelectionMode" value="3" ver="5"/>
			<designed target="SelectionOverlayEnabled" value="false" ver="5"/>
			<designed target="LatestRowTracking" value="false" ver="5"/>
			<designed target="DelayedSortingEnabled" value="false" ver="5"/>
			<designed target="HorizontalScrollMode" value="0" ver="5"/>
			<designed target="VerticalScrollMode" value="0" ver="5"/>
			<designed target="HorizontalScrollBarPolicy" value="0" ver="5"/>
			<designed target="VerticalScrollBarPolicy" value="0" ver="5"/>
			<object access-modifier="private" name="Column" display-name="Column" uuid="8f4a6d3e-28e8-4050-92a2-e86a2a940e14" base-type="TableColumn" base-type-id="109c05c5-8dcf-4a8f-aedd-5bb547cca2d4" ver="5" cardinal="2">
				<designed target="Title" value="" ver="5"/>
				<designed target="Description" value="" ver="5"/>
				<designed target="Id" value="" ver="5"/>
				<designed target="ColumnOwnId" value="" ver="5"/>
				<designed target="BackgroundColor" value="0xfff0f0f0" ver="5"/>
				<designed target="ForegroundColor" value="0xff000000" ver="5"/>
				<designed target="Font" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
				<designed target="TextAlignment" value="129" ver="5"/>
				<designed target="TitleBackgroundColor" value="0xfff0f0f0" ver="5"/>
				<designed target="TitleForegroundColor" value="0xff000000" ver="5"/>
				<designed target="TitleFont" value="Tahoma,8,-1,5,50,0,0,0,0,0,Обычный" ver="5"/>
				<designed target="TitleTextAlignment" value="132" ver="5"/>
				<designed target="Width" value="20" ver="5"/>
				<designed target="WidthResizeMode" value="1" ver="5"/>
				<designed target="Emptiable" value="true" ver="5"/>
				<designed target="Hidden" value="false" ver="5"/>
				<designed target="NumberFormat" value="%g" ver="5"/>
				<designed target="TimeFormat" value="dd.MM.yyyy hh:mm:ss.zzz" ver="5"/>
				<designed target="JsonFilter" value="" ver="5"/>
				<designed target="SortingEnabled" value="false" ver="5"/>
				<designed target="SortOrder" value="0" ver="5"/>
				<designed target="SortPriority" value="0" ver="5"/>
				<designed target="SortMode" value="0" ver="5"/>
				<designed target="WordWrap" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseTitleClick">
					<body kind="om">
						<![CDATA[
// меняем направление сортировки: прямая -> обратная -> отключена и т.д.
if (SortingEnabled)
{
	if (SortOrder == 0)
		SortOrder = 1; // меняем направление сортировки
	else SortingEnabled = false; // отключаем сортировку
}
else
{
	// включаем сортировку
	SortOrder = 0;
	SortingEnabled = true;
}

// сортируем таблицу
ApplySort();
private.SaveViewSettings();]]>
					</body>
				</do-on>
				<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="WidthChanged">
					<body kind="om">
						<![CDATA[private.SaveViewSettings();]]>
					</body>
				</do-on>
				<do-trace access-modifier="private" target="BackgroundColor" ver="5">
					<body>
						<![CDATA[private.pTheme.EditorBrushColor]]>
					</body>
				</do-trace>
				<do-trace access-modifier="private" target="ForegroundColor" ver="5">
					<body>
						<![CDATA[private.pTheme.EditorFontColor]]>
					</body>
				</do-trace>
				<do-trace access-modifier="private" target="Font" ver="5">
					<body>
						<![CDATA[private.pTheme.Font]]>
					</body>
				</do-trace>
				<do-trace access-modifier="private" target="TitleBackgroundColor" ver="5">
					<body>
						<![CDATA[private.pTheme.BackgroundColor]]>
					</body>
				</do-trace>
				<do-trace access-modifier="private" target="TitleForegroundColor" ver="5">
					<body>
						<![CDATA[private.pTheme.ForegroundColor]]>
					</body>
				</do-trace>
				<do-trace access-modifier="private" target="TitleFont" ver="5">
					<body>
						<![CDATA[private.pTheme.TitleFont]]>
					</body>
				</do-trace>
			</object>
			<init target="TableModel" ver="5" ref="Model"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="CurrentChanged">
				<body kind="om">
					<![CDATA[if (row >= 0 && row < GetRowCount())
{
	rowInModel:int4 = MapRowToModel(row);
	private.SelectedRoleData.Id = Variant.ToString(TableModel.GetCellData(rowInModel, 0), "");
	private.SelectedRoleData.Name = Variant.ToString(TableModel.GetCellData(rowInModel, 1), "");
	private.UpdateRightsInTable();
}
else
{
	private.SelectedRoleData.Reset();
	WorkPanel.RightsTable.RemoveAllRows();
}]]>
				</body>
			</do-on>
			<designed target="BackgroundColor" value="0xffffffff" ver="5"/>
			<designed target="FrameColor" value="0xff000000" ver="5"/>
			<designed target="GridColor" value="0xffd8d8d8" ver="5"/>
			<object access-modifier="private" name="Model" display-name="Model" uuid="a161a28f-8068-44f4-87ee-edcd0534780c" base-type="TableModel" base-type-id="32b2875b-ee3e-454d-bcbb-40806a49273c" ver="5">
				<designed target="Frozen" value="false" ver="5"/>
				<designed target="MaxRowCount" value="10000" ver="5"/>
				<designed target="OptOfProcessingEvents" value="0" ver="5"/>
			</object>
			<do access-modifier="private" name="Init" display-name="Init" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
				<body kind="om">
					<![CDATA[if (Model.GetColumnCount() > 0)
	return;
	
//Инициализация таблицы
Column[0].Title = "Id";
Column[0].Id = "roleID";
Column[0].Hidden = true;
Column[0].Width = 20;
	
Column[1].Title = "Роль";
Column[1].Id = "roleName";
Column[1].Hidden = false;
Column[1].Width = 100;
Column[1].SortingEnabled = true;
Column[1].SortOrder = 0;
	
ApplySort();

Decorator.JsonDecorator = GetJsonDecorator(selectionColor);

Model.Reset();
Model.AddColumn("roleID","","","","string",false,true);
Model.AddColumn("roleName","","","","string",false,true);]]>
				</body>
			</do>
			<object access-modifier="private" name="SizeLimits" display-name="SizeLimits" uuid="d672695f-0a47-4202-8548-6d61081b5755" base-type="LayoutSizeLimits" base-type-id="10342c1f-560b-4160-9de5-7e2c08026f47" ver="5" description="" cardinal="1">
				<designed target="MinWidth" value="220" ver="5"/>
				<designed target="MinHeight" value="0" ver="5"/>
				<designed target="MaxWidth" value="220" ver="5"/>
				<designed target="MaxHeight" value="16777215" ver="5"/>
				<do-trace access-modifier="private" target="MinWidth" ver="5">
					<body>
						<![CDATA[Splitter.Position]]>
					</body>
				</do-trace>
				<do-trace access-modifier="private" target="MaxWidth" ver="5">
					<body>
						<![CDATA[Splitter.Position]]>
					</body>
				</do-trace>
			</object>
			<do-trace access-modifier="private" target="BackgroundColor" ver="5">
				<body>
					<![CDATA[private.pTheme.EditorBrushColor]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="FrameColor" ver="5">
				<body>
					<![CDATA[private.pTheme.BorderColor]]>
				</body>
			</do-trace>
			<do-trace access-modifier="private" target="GridColor" ver="5">
				<body>
					<![CDATA[private.pTheme.DisabledBorderColor]]>
				</body>
			</do-trace>
			<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="KeyPress">
				<body kind="om">
					<![CDATA[if (!SystemCommands.GoTo.CanExecute)
	return;

if (keyCode == 110) 				// Insert
	Commands.DoCreate = true;
else if (keyCode == 82) 			// Enter
	Commands.DoEdit = true;
else if (keyCode == 109) 		// Delete
	Commands.DoRemoveSelected = true;]]>
				</body>
			</do-on>
			<object access-modifier="private" name="selectionColor" display-name="selectionColor" uuid="fa715f83-1f18-496b-bbc3-c6b977f0d24b" base-type="notifying_uint8" base-type-id="2e6d6c20-2489-49e1-9d5f-fe68a21b43df" ver="5" description="" cardinal="1"/>
			<designed target="RowHeightResizeMode" value="3" ver="5"/>
			<do-trace access-modifier="private" target="selectionColor" ver="5">
				<body>
					<![CDATA[private.pTheme.SelectionColor]]>
				</body>
			</do-trace>
			<object access-modifier="private" name="Decorator" display-name="Decorator" uuid="4faa2242-b58d-4892-aec8-a3044909e94a" base-type="TableDecorator" base-type-id="2ff6a2d7-9573-4060-bfea-29c63d61b079" ver="5" description="" cardinal="1">
				<designed target="JsonDecorator" value="" ver="5"/>
			</object>
			<do access-modifier="private" name="GetJsonDecorator" display-name="GetJsonDecorator" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
				<body kind="javascript">
					<![CDATA[var decorator = {};

decorator.StyleDictionary = [
	{
		'style_name': "selected_style",
		'style': { 'background_color': `#${selectionColor.toString(16)}` }
	}
];

decorator.Decorating = [
	{
		'decoration_rule_name': "selected_rule", 
		'decoration_rule': { 'row:isSelected': true },
		'rowstyle': "selected_style"
	}

];

return JSON.stringify(decorator);]]>
				</body>
				<param access-modifier="private" name="selectionColor" display-name="" uuid="b67563c3-3cc6-4dca-9bdc-cc4624173db0" base-type="uint8" base-type-id="c8ff7701-da6e-4d53-888a-81fa680ff561" ver="5"/>
			</do>
		</object>
		<object access-modifier="private" name="Splitter" display-name="Splitter" uuid="d60e0285-0500-461d-bde7-ce7d6b62c52e" base-type="HorizontalSplitter" base-type-id="9f2e11a5-219a-4c9b-bceb-928724b2f965" ver="5" description="" cardinal="1">
			<designed target="X" value="843" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="4" ver="5"/>
			<designed target="Height" value="378" ver="5"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseRelease">
				<body kind="om">
					<![CDATA[here.private.SaveViewSettings();]]>
				</body>
			</do-on>
			<init target="Position" ver="5" value="220"/>
			<init target="Minimum" ver="5" value="30"/>
			<init target="init_Theme" ver="5" ref="here.init_Theme"/>
		</object>
		<object access-modifier="private" name="LinearLayout" display-name="LinearLayout" uuid="c2490c2a-bd41-40de-858f-fa1573285506" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="5" description="" cardinal="1">
			<designed target="Orientation" value="1" ver="5"/>
			<designed target="Gap" value="0" ver="5"/>
		</object>
		<object access-modifier="private" name="LayoutWeight" display-name="LayoutWeight" uuid="57bb9d25-d5ed-468b-ad83-7e94d91f0dc9" base-type="LayoutWeight" base-type-id="8f3d975c-9645-4288-9406-a8dda0527008" ver="5" description="" cardinal="1">
			<designed target="Weight" value="1000" ver="5"/>
		</object>
		<object access-modifier="private" name="RightsTable" display-name="RightsTable" uuid="53328810-2d3b-4c77-abb2-6f93184effcd" base-type="RightsTable" base-type-id="e141c390-8852-4e53-874f-a5fe9c888efa" ver="5" description="" cardinal="1">
			<designed target="X" value="224" ver="5"/>
			<designed target="Y" value="0" ver="5"/>
			<designed target="Rotation" value="0" ver="5"/>
			<designed target="Width" value="623" ver="5"/>
			<designed target="Height" value="378" ver="5"/>
			<object access-modifier="private" name="ExchangeDialogData" display-name="ExchangeDialogData" uuid="7cad1704-9286-4a0e-9695-337a567fba31" base-type="ChangeRightResult" base-type-id="3efb0823-a348-4b39-a762-64290867ccb6" ver="5"/>
			<object access-modifier="private" name="OnViewSettingsChanged" display-name="OnViewSettingsChanged" uuid="563a03e4-ddc8-4b27-86f5-707820224c9b" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5" description="" cardinal="1">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[here.private.SaveViewSettings();]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="ChangeRightComplete" display-name="ChangeRightComplete" uuid="f3b0d228-eb27-48af-a534-412b37d7b992" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="5">
				<designed target="Enabled" value="true" ver="5"/>
				<designed target="InvokeTrigger" value="false" ver="5"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[if (ExchangeDialogData.GetDataValidation())
{
	roleId: string = here.private.SelectedRoleData.Id;
	here.Application.RoleChangeRight(ExchangeDialogData.App, roleId, ExchangeDialogData.Name, ExchangeDialogData.AllowValue, ExchangeDialogData.DenyValue);
	here.private.UpdateRightsInTable();
	ExchangeDialogData.ResetParamsValues();
	here.private.SaveChanges.needSave = true;
}]]>
					</body>
				</do-on>
			</object>
			<init target="init_Theme" ver="5" ref="here.init_Theme"/>
			<init target="init_ScreenKeyboard" ver="5" ref="here.init_ScreenKeyboard"/>
			<init target="init_ChangedRightsResult" ver="5" ref="ExchangeDialogData"/>
			<init target="pViewSettingsChanged" ver="5" ref="OnViewSettingsChanged"/>
			<init target="EditingAllowed" ver="5" value="true"/>
			<do-trace access-modifier="private" target="EditingAllowed" ver="5">
				<body>
					<![CDATA[pConfigurationAccess.Value]]>
				</body>
			</do-trace>
			<init target="pRightValueChanged" ver="5" ref="ChangeRightComplete"/>
			<object access-modifier="private" name="LayoutWeight" display-name="LayoutWeight" uuid="2aca1ad8-251b-4070-adb6-d4334aacfd81" base-type="LayoutWeight" base-type-id="8f3d975c-9645-4288-9406-a8dda0527008" ver="5" description="" cardinal="1">
				<designed target="Weight" value="1000" ver="5"/>
			</object>
		</object>
	</object>
	<object access-modifier="private" name="inputAppID" display-name="inputAppID" uuid="0eeb669a-4f51-4c33-9961-3c62ebc38c9d" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5"/>
	<object access-modifier="private" name="pConfigurationAccess" display-name="Разрешить редактирование" uuid="d32db8c5-e9db-4c53-8dc0-22776d2672c0" base-type="BoolTokenProxy" base-type-id="9cc1c61e-9310-406a-8f93-18028f747d59" base-const="true" base-ref="true" ver="5" description=""/>
	<object access-modifier="private" name="Commands" display-name="Commands" uuid="f6306372-45dc-4e9b-96c1-9ca784e69375" base-type="RoleCommands" base-type-id="0a9f57da-9992-430a-9df5-ca597b7c8ba3" base-const="true" base-ref="true" ver="5"/>
	<object access-modifier="private" name="SystemCommands" display-name="SystemCommands" uuid="9811db03-cc48-4bab-8cc8-79fdbad1836c" base-type="SystemCommands" base-type-id="0b754dab-38c6-43db-a050-37201965421c" base-const="true" base-ref="true" ver="5"/>
	<designed target="WindowIconPath" value="" ver="5"/>
	<object access-modifier="private" name="Layout" display-name="Layout" uuid="d0223b7a-6135-4e6a-9eb4-65fa8bb7bce9" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="5" description="" cardinal="1">
		<designed target="Orientation" value="2" ver="5"/>
		<designed target="Gap" value="0" ver="5"/>
	</object>
	<do access-modifier="private" name="UpdateView" display-name="UpdateView" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
		<body kind="javascript">
			<![CDATA[var rolesView = WorkPanel.RoleView;
var rightsView = WorkPanel.RightsTable;

var content = JSON.parse(settings);


if (content.Layout != undefined){
	var layout = content.Layout;
	
	WorkPanel.Splitter.Position = layout.RolesTable;
}

let rolesTable = content.RolesTable;
if (rolesTable != undefined)
{
	if (rolesTable.Columns != undefined)
	{
		for (var i = 0; i < rolesView.Column.Length; i++)
		{
			var column = rolesView.Column[i];
			var columnInfo = rolesTable.Columns[column.Id];
			if (columnInfo != undefined)
			{
				column.Width = columnInfo.Width;
				column.Hidden = columnInfo.Hidden;
				column.SortingEnabled = columnInfo.SortOrder != undefined;
				if (column.SortingEnabled)
				{
					column.SortOrder = columnInfo.SortOrder;
					column.SortPriority = columnInfo.SortPriority;
					rolesView.ApplySort();
				}
			}
		}
	}
}
	
let rightsTable = content.RightsTable;
if (rightsTable != undefined)
	rightsView.UpdateView(JSON.stringify(rightsTable));]]>
		</body>
		<param access-modifier="private" name="settings" display-name="" uuid="279aaa64-cae5-45d5-abbc-3c8b53623558" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="5"/>
	</do>
	<do access-modifier="private" name="GetViewSettings" display-name="GetViewSettings" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
		<body kind="javascript">
			<![CDATA[var rolesView = WorkPanel.RoleView;
var rightsView = WorkPanel.RightsTable;

var settings = 
	{
		"Layout" : {
			"RolesTable": WorkPanel.Splitter.Position.Value
		},
		"RolesTable" : {
			"Columns":{}
		},
		"RightsTable" : JSON.parse(rightsView.GetViewSettings())
		
	};

for (var i = 0; i < rolesView.Column.Length; i++)
{		
	var column = rolesView.Column[i];
	var columnInfo = {
		"Index": column.Index,
		"Width": column.Width,
		"Hidden": column.Hidden
	};
	if (column.SortingEnabled != false)
	{
		columnInfo.SortOrder = column.SortOrder;
		columnInfo.SortPriority = column.SortPriority;
	}
	
		settings.RolesTable.Columns[column.Id] = columnInfo;
}

return JSON.stringify(settings);]]>
		</body>
	</do>
	<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="Closed">
		<body kind="om">
			<![CDATA[SystemCommands.DoSave.CanExecute = false;]]>
		</body>
	</do-on>
	<designed target="Flip" value="0" ver="5"/>
	<do-on access-modifier="private" name="Handler_3" display-name="Handler_3" ver="5" event="WindowSizeChanged">
		<body kind="om">
			<![CDATA[Width = WindowWidth;
Height = WindowHeight;]]>
		</body>
	</do-on>
	<param access-modifier="private" name="init_Theme" display-name="init_Theme" uuid="766d4735-3364-49a1-ac80-c73c3094a3cd" base-type="Theme" base-type-id="05d4d7df-0f8e-4ec1-ac85-b5460e30af81" base-const="true" base-ref="true" ver="5" description=""/>
	<do-trace access-modifier="private" target="BrushColor" ver="5">
		<body>
			<![CDATA[private.pTheme.BackgroundColor]]>
		</body>
	</do-trace>
	<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="5" event="AboutToOpen">
		<body kind="om">
			<![CDATA[SystemCommands.GoTo.doBlockingControll();
Application.Load(inputAppID);

WorkPanel.RoleView.Init();

UpdateView(SystemCommands.ViewSettings.Data[SystemCommands.Forms.RoleEditor]);]]>
		</body>
	</do-on>
	<param access-modifier="private" name="init_ScreenKeyboard" display-name="init_ScreenKeyboard" uuid="3c5382a6-74af-4f54-b0d2-6400bfeb1337" base-type="ScreenKeyboardOptions" base-type-id="0589bc8e-fbb2-4f0e-b5d2-f0d825538ef1" base-const="true" base-ref="true" ver="5" description=""/>
</type>

